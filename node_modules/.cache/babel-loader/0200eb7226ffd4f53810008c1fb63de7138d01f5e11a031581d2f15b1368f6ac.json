{"ast":null,"code":"import \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.array.at.js\";\nimport \"core-js/modules/es.string.at-alternative.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport { onMounted, ref } from \"vue\";\nimport { getItemInDocById, getItemInDataById } from \"@/hooks/getItem\";\nimport { useTodoItemList } from \"./hooks/useTodoItemList\";\nexport default {\n  __name: 'App',\n  setup: function setup(__props, _ref) {\n    var expose = _ref.expose;\n    expose();\n    var todoList = useTodoItemList([{\n      id: 15,\n      title: \"Title\",\n      text: [\"Пустая строка\"],\n      position: {\n        x: window.innerWidth / 2 - 200,\n        y: window.innerHeight / 2 - 200,\n        z: 100\n      },\n      menuToggle: false,\n      lock: false\n    }]);\n    var arrows = ref([]);\n    var successItem = ref({\n      show: false,\n      message: \"\",\n      func: null,\n      btn: {\n        yes: \"\",\n        no: \"\"\n      }\n    });\n    var dragObject = null;\n    var arrowMode = ref(false);\n    var arrowModeItems = ref({\n      firstItem: null,\n      secondItem: null\n    });\n    var arrowObject = ref(null);\n\n    // <!-- ? item movement -->\n\n    var mouseX = ref(0);\n    var mouseY = ref(0);\n    var offsetItemX = ref(0);\n    var offsetItemY = ref(0);\n    var itemTest = useTodoItemList([{\n      id: 15,\n      title: \"Title\",\n      text: [\"Пустая строка\"],\n      position: {\n        x: window.innerWidth / 2 - 200,\n        y: window.innerHeight / 2 - 200,\n        z: 100\n      },\n      menuToggle: false,\n      lock: false\n    }]);\n    function mouseMove(event) {\n      event = fixEvent(event);\n      mouseX.value = event.pageX;\n      mouseY.value = event.pageY;\n      if (dragObject) {\n        itemTest.setItemPos(15, 100, 100);\n        console.log(itemTest);\n      }\n      if (arrowMode.value === true) {\n        document.querySelector(\".arrowModeSecondItem\").style = \"position: absolute; width: 2px; height: 2px;top: \".concat(mouseY.value - 5, \"px; left: \").concat(mouseX.value - 5, \"px; pointer-events: none;\");\n        redrawArrows(null, arrows.value);\n      }\n    }\n\n    // function setPosToItem(dragObject, mouseX, mouseY, offsetItemX, offsetItemY) {\n\n    // const todoItem = getItemInDataById(todoList.value, dragObject.getAttribute(\"todo-id\"));\n    // if (todoItem.lock) return;\n\n    // todoItem.position.x = mouseX - offsetItemX;\n    // // <!-- ? For not moving bottom them max -->\n    // if (mouseY + dragObject.getBoundingClientRect().height / 3 < window.innerHeight && mouseY > 20) {\n    //     todoItem.position.y = mouseY - offsetItemY;\n    // }\n\n    // redrawArrows(dragObject, arrows.value);\n    // }\n\n    function fixEvent(event) {\n      event = event || window.event;\n      if (event.pageX == null && event.clientX != null) {\n        var html = document.documentElement;\n        var body = document.body;\n        event.pageX = event.clientX + (html && html.scrollLeft || body && body.scrollLeft || 0) - (html.clientLeft || 0);\n        event.pageY = event.clientY + (html && html.scrollTop || body && body.scrollTop || 0) - (html.clientTop || 0);\n      }\n      if (!event.which && event.button) {\n        event.which = event.button & 1 ? 1 : event.button & 2 ? 3 : event.button & 4 ? 2 : 0;\n      }\n      return event;\n    }\n    function setDragObject(event) {\n      dragObject = event.target.closest(\".todo__item\");\n      offsetItemX.value = mouseX.value - dragObject.getBoundingClientRect().left;\n      offsetItemY.value = mouseY.value - dragObject.getBoundingClientRect().top;\n      dragObject.classList.add(\"drag\");\n      document.body.onselectstart = function () {\n        return false;\n      };\n    }\n    function delDragObject() {\n      if (dragObject) {\n        dragObject.classList.remove(\"drag\");\n        dragObject = null;\n        document.body.onselectstart = function () {};\n      }\n    }\n    function setToTopItem(event) {\n      if (getItemInDataById(todoList.value, event.target.closest(\".todo__item\").getAttribute(\"todo-id\")).lock) return;\n      getItemInDataById(todoList.value, event.target.closest(\".todo__item\").getAttribute(\"todo-id\")).position.z = 100;\n      var missArr = [];\n      todoList.value.forEach(function (el, i) {\n        missArr.push({\n          index: i,\n          z: el.position.z\n        });\n      });\n      missArr = missArr.sort(function (prev, next) {\n        return prev.z - next.z;\n      });\n      missArr.forEach(function (el, i) {\n        el.z = i + 10;\n        todoList.value[el.index].position.z = el.z;\n      });\n    }\n\n    // <!-- ? Item functional -->\n\n    function addNewItem() {\n      todoList.value.push({\n        id: crypto.randomUUID(),\n        title: \"Title\",\n        text: [\"Пустая строка\"],\n        position: {\n          x: window.innerWidth / 2 - 200,\n          y: window.innerHeight / 2 - 200,\n          z: 100\n        },\n        menuToggle: false,\n        lock: false\n      });\n    }\n    function deleteItem(id) {\n      todoList.value.forEach(function (el, index) {\n        if (el.id === id) todoList.value.splice(index, 1);\n      });\n      arrows.value.forEach(function (el, index) {\n        if (el.firstItem === id || el.secondItem === id) {\n          arrows.value.splice(index, 1);\n          document.getElementById(\"area\").innerHTML = '';\n          arrows.value.forEach(function (el) {\n            setArrows(el, getItemInDocById(el.firstItem), getItemInDocById(el.secondItem));\n          });\n        }\n      });\n    }\n    function showDeleteDiolog(event) {\n      successItem.value = {\n        show: true,\n        message: \"Удалить этот пин?\",\n        func: {\n          type: \"item:delete\",\n          id: event.target.closest(\".todo__item\").getAttribute(\"todo-id\")\n        },\n        btn: {\n          yes: \"Удалить\",\n          no: \"Отмена\"\n        }\n      };\n    }\n    function setLockItem(event) {\n      var todoItem = getItemInDataById(todoList.value, event.target.closest(\".todo__item\").getAttribute(\"todo-id\"));\n      todoItem.lock = !todoItem.lock;\n      todoItem.menuToggle = false;\n    }\n\n    // <!-- ? Modal Window functional -->\n\n    function modalJustClose() {\n      successItem.value = {\n        show: false,\n        message: \"\",\n        func: null,\n        btn: {\n          yes: \"\",\n          no: \"\"\n        }\n      };\n    }\n    function modalDoIt(content) {\n      if (content.type === \"item:delete\") {\n        deleteItem(content.id);\n      }\n      modalJustClose();\n    }\n\n    // <!-- ? Todo -->\n    function addNewTodoList(event) {\n      var item = getItemInDataById(todoList.value, event.target.closest(\".todo__item\").getAttribute(\"todo-id\"));\n      item.text.push([{\n        id: 1,\n        text: \"\",\n        status: false\n      }]);\n      item.text.push(\"\");\n    }\n    function changeStatusTodoItem(status) {\n      var item = getItemInDataById(todoList.value, status.itemId);\n      getItemInDataById(item.text[status.listCount], status.todoId).status = !getItemInDataById(item.text[status.listCount], status.todoId).status;\n    }\n    function addNewTodoItem(status) {\n      var list = getItemInDataById(todoList.value, status.itemId).text[status.listCount];\n      var itt = list.reduce(function (acc, curr) {\n        if (acc.id > curr.id) return acc;else return curr;\n      });\n      list.splice(list.findIndex(function (el) {\n        return el.id == status.todoId;\n      }) + 1, 0, {\n        id: itt.id + 1,\n        text: \"\",\n        status: false,\n        focus: true\n      });\n    }\n    function removeTodoItem(status) {\n      var item = getItemInDataById(todoList.value, status.itemId);\n      var list = item.text[status.listCount];\n      list.splice(list.findIndex(function (el) {\n        return el.id == status.todoId;\n      }), 1);\n      if (!list.length) {\n        if (typeof item.text[status.listCount - 1] === \"string\") {\n          if (typeof item.text[status.listCount + 1] === \"string\") {\n            item.text[status.listCount - 1] += item.text[status.listCount + 1];\n            item.text.splice(status.listCount + 1, 1);\n          }\n        } else {\n          if (typeof item.text[status.listCount + 1] !== \"string\") {\n            item.text.splice(status.listCount - 1, 0, \"\");\n          }\n        }\n        item.text.splice(status.listCount, 1);\n      }\n    }\n    function removeFocusTodoItemInput(status) {\n      var list = getItemInDataById(todoList.value, status.itemId).text[status.listCount];\n      list[list.findIndex(function (el) {\n        return el.id == status.todoId;\n      })].focus = false;\n    }\n\n    // <!-- ? Arrows -->\n\n    function setArrows(arrow, fi, si) {\n      var firstItem = fi.getBoundingClientRect();\n      var secondItem = si.getBoundingClientRect();\n      var firstItemXcenter = firstItem.left + firstItem.width / 2,\n        firstItemYcenter = firstItem.top + firstItem.height / 2,\n        secondItemXcenter = secondItem.left + secondItem.width / 2,\n        secondItemYcenter = secondItem.top + secondItem.height / 2;\n      var startArrow = {\n        x: 0,\n        y: 0\n      };\n      var endArrow = {\n        x: 0,\n        y: 0\n      };\n      var offsetFirstItemX = 0;\n      var offsetFirstItemY = 0;\n      var offsetSecondItemX = 0;\n      var offsetSecondItemY = 0;\n      if (Math.abs(firstItemXcenter - secondItemXcenter) > Math.abs(firstItemYcenter - secondItemYcenter)) {\n        offsetFirstItemX = firstItem.width / 2;\n        offsetFirstItemY = firstItem.height / 4;\n        offsetSecondItemX = secondItem.width / 2;\n        offsetSecondItemY = secondItem.height / 4;\n        if (Math.abs(firstItemYcenter - secondItemYcenter) < 100) {\n          offsetFirstItemY = 0;\n          offsetSecondItemY = 0;\n        }\n      } else {\n        offsetFirstItemX = firstItem.width / 4;\n        offsetFirstItemY = firstItem.height / 2;\n        offsetSecondItemX = secondItem.width / 4;\n        offsetSecondItemY = secondItem.height / 2;\n      }\n      if (firstItemXcenter > secondItemXcenter) {\n        // <!-- * 2nd item left side -->\n        startArrow.x = firstItemXcenter - offsetFirstItemX;\n        endArrow.x = secondItemXcenter + offsetSecondItemX;\n      } else {\n        // <!-- * 2nd item right side -->\n        startArrow.x = firstItemXcenter + offsetFirstItemX;\n        endArrow.x = secondItemXcenter - offsetSecondItemX;\n      }\n      if (firstItemYcenter > secondItemYcenter) {\n        // <!-- * 2nd item top -->\n        startArrow.y = firstItemYcenter - offsetFirstItemY;\n        endArrow.y = secondItemYcenter + offsetSecondItemY;\n      } else {\n        // <!-- * 2nd item bottom -->\n        startArrow.y = firstItemYcenter + offsetFirstItemY;\n        endArrow.y = secondItemYcenter - offsetSecondItemY;\n      }\n      var docArrow = document.querySelector(\"#area g[arrow-id='\".concat(arrow.id, \"']\"));\n      if (!docArrow) {\n        document.getElementById(\"area\").innerHTML += \"\\n            <g arrow-id='\".concat(arrow.id, \"' class=\\\"arrow__line\\\">\\n                <defs>\\n                    <marker id=\\\"arrowhead\\\" markerWidth=\\\"5\\\" markerHeight=\\\"4\\\" refX=\\\"5\\\" refY=\\\"2\\\" orient=\\\"auto\\\">\\n                        <polygon points=\\\"0 0, 5 2, 0 4\\\" />\\n                    </marker>\\n                </defs>\\n                <line class=\\\"line__main\\\" x1=\\\"\").concat(startArrow.x, \"\\\" y1=\\\"\").concat(startArrow.y, \"\\\" x2=\\\"\").concat(endArrow.x, \"\\\" y2=\\\"\").concat(endArrow.y, \"\\\" stroke-width=\\\"3\\\" marker-end=\\\"url(#arrowhead)\\\" />\\n            </g>\\n        \");\n      } else {\n        docArrow.querySelector(\".line__main\").setAttribute(\"x1\", startArrow.x);\n        docArrow.querySelector(\".line__main\").setAttribute(\"y1\", startArrow.y);\n        docArrow.querySelector(\".line__main\").setAttribute(\"x2\", endArrow.x);\n        docArrow.querySelector(\".line__main\").setAttribute(\"y2\", endArrow.y);\n      }\n    }\n    function redrawArrows(dragObject, arrows) {\n      if (arrowMode.value === true) {\n        setArrows(arrows.at(-1), getItemInDocById(arrows.at(-1).firstItem), arrows.at(-1).secondItem);\n        return;\n      }\n      var todoItem = getItemInDataById(todoList.value, dragObject.getAttribute(\"todo-id\"));\n      arrows.forEach(function (el) {\n        if (todoItem.id == el.firstItem || todoItem.id == el.secondItem) {\n          setArrows(el, getItemInDocById(el.firstItem), getItemInDocById(el.secondItem));\n        }\n      });\n    }\n    function arrowModeSetter(event) {\n      arrowMode.value = true;\n      var secondArrowModeItem = document.createElement(\"div\");\n      secondArrowModeItem.className = \"arrowModeSecondItem\";\n      document.querySelector(\".main\").append(secondArrowModeItem);\n      arrowModeItems.value.firstItem = event.target.closest(\".todo__item\");\n      arrowModeItems.value.secondItem = secondArrowModeItem;\n      arrows.value.push({\n        id: crypto.randomUUID(),\n        firstItem: event.target.closest(\".todo__item\").getAttribute(\"todo-id\"),\n        secondItem: secondArrowModeItem\n      });\n      setArrows(arrows.value.at(-1), getItemInDocById(arrows.value.at(-1).firstItem), arrows.value.at(-1).secondItem);\n      getItemInDataById(todoList.value, event.target.closest(\".todo__item\").getAttribute(\"todo-id\")).menuToggle = false;\n    }\n    function addNewArrow(event) {\n      if (!arrowMode.value) return;\n      if (event.target.closest(\".todo__item\")) {\n        var item = event.target.closest(\".todo__item\");\n        if (item.getAttribute(\"todo-id\") === arrows.value.at(-1).firstItem) return;\n        arrows.value.at(-1).secondItem = item.getAttribute(\"todo-id\");\n        arrowMode.value = false;\n        arrowModeItems.value.firstItem = null;\n        arrowModeItems.value.secondItem = null;\n        document.querySelector(\".arrowModeSecondItem\").remove();\n      }\n      arrows.value.forEach(function (el) {\n        setArrows(el, getItemInDocById(el.firstItem), getItemInDocById(el.secondItem));\n      });\n    }\n\n    // <!-- ? Item menu position -->\n    function setItemMenuPosition(event) {\n      var menuType = \"menu\";\n      var item = event.target.closest(\".todo__item\");\n      var itemMenu = getItemInDataById(todoList.value, item.getAttribute(\"todo-id\"));\n      itemMenu.menuToggle = !itemMenu.menuToggle;\n      if (window.innerWidth - item.getBoundingClientRect().right < 180) {\n        menuType += \"-left\";\n      } else {\n        menuType += \"-right\";\n      }\n      if (item.getBoundingClientRect().top < 120) {\n        menuType += \"-bottom\";\n      } else {\n        menuType += \"-top\";\n      }\n      item.setAttribute(\"menu-type\", menuType);\n      var listener = function listener(event) {\n        if (!event.target.closest(\".todo__item\")) {\n          if (event.target.closest(\".component\")) {\n            itemMenu.menuToggle = false;\n            document.removeEventListener(\"click\", listener, false);\n          }\n        } else {\n          if (event.target.closest(\".todo__item\").getAttribute(\"todo-id\") !== item.getAttribute(\"todo-id\")) {\n            itemMenu.menuToggle = false;\n            document.removeEventListener(\"click\", listener, false);\n          }\n        }\n      };\n      document.addEventListener(\"click\", listener, false);\n    }\n\n    // <!-- ? Items list function -->\n\n    function hoverFocusedItem(id) {\n      getItemInDocById(id).classList.add(\"hover\");\n    }\n    function blurFocusedItem() {\n      document.querySelectorAll(\".todo__item\").forEach(function (el) {\n        return el.classList.remove(\"hover\");\n      });\n    }\n\n    // <!-- ? Dop functions -->\n\n    function setKeyListener() {\n      document.addEventListener(\"keydown\", function (event) {\n        if (event.key === \"Delete\") {\n          if (arrowObject.value) {\n            arrows.value.forEach(function (el, index) {\n              if (el.id === arrowObject.value.getAttribute(\"arrow-id\")) {\n                console.log(\"123\");\n                arrows.value.splice(index, 1);\n              }\n              document.getElementById(\"area\").innerHTML = '';\n              arrows.value.forEach(function (el) {\n                setArrows(el, getItemInDocById(el.firstItem), getItemInDocById(el.secondItem));\n              });\n              if (!arrows.value.length) {\n                document.getElementById(\"area\").innerHTML = '';\n              }\n            });\n          }\n        }\n      });\n    }\n    onMounted(function () {\n      var area = document.getElementById(\"area\");\n      area.setAttribute(\"width\", window.innerWidth);\n      area.setAttribute(\"height\", window.innerHeight);\n      area.addEventListener(\"click\", function (event) {\n        if (event.target.closest(\".arrow__line\") !== null) {\n          arrowObject.value = event.target.closest(\".arrow__line\");\n          event.target.closest(\".arrow__line\").classList.add(\"focused\");\n        } else {\n          arrowObject.value = null;\n        }\n      });\n      arrows.value.forEach(function (el) {\n        setArrows(el, getItemInDocById(el.firstItem), getItemInDocById(el.secondItem));\n      });\n      window.addEventListener(\"resize\", function () {\n        arrows.value.forEach(function (el) {\n          setArrows(el, getItemInDocById(el.firstItem), getItemInDocById(el.secondItem));\n        });\n      });\n      setKeyListener();\n    });\n    var __returned__ = {\n      todoList: todoList,\n      arrows: arrows,\n      successItem: successItem,\n      get dragObject() {\n        return dragObject;\n      },\n      set dragObject(v) {\n        dragObject = v;\n      },\n      get arrowMode() {\n        return arrowMode;\n      },\n      set arrowMode(v) {\n        arrowMode = v;\n      },\n      get arrowModeItems() {\n        return arrowModeItems;\n      },\n      set arrowModeItems(v) {\n        arrowModeItems = v;\n      },\n      get arrowObject() {\n        return arrowObject;\n      },\n      set arrowObject(v) {\n        arrowObject = v;\n      },\n      mouseX: mouseX,\n      mouseY: mouseY,\n      offsetItemX: offsetItemX,\n      offsetItemY: offsetItemY,\n      itemTest: itemTest,\n      mouseMove: mouseMove,\n      fixEvent: fixEvent,\n      setDragObject: setDragObject,\n      delDragObject: delDragObject,\n      setToTopItem: setToTopItem,\n      addNewItem: addNewItem,\n      deleteItem: deleteItem,\n      showDeleteDiolog: showDeleteDiolog,\n      setLockItem: setLockItem,\n      modalJustClose: modalJustClose,\n      modalDoIt: modalDoIt,\n      addNewTodoList: addNewTodoList,\n      changeStatusTodoItem: changeStatusTodoItem,\n      addNewTodoItem: addNewTodoItem,\n      removeTodoItem: removeTodoItem,\n      removeFocusTodoItemInput: removeFocusTodoItemInput,\n      setArrows: setArrows,\n      redrawArrows: redrawArrows,\n      arrowModeSetter: arrowModeSetter,\n      addNewArrow: addNewArrow,\n      setItemMenuPosition: setItemMenuPosition,\n      hoverFocusedItem: hoverFocusedItem,\n      blurFocusedItem: blurFocusedItem,\n      setKeyListener: setKeyListener,\n      onMounted: onMounted,\n      ref: ref,\n      get getItemInDocById() {\n        return getItemInDocById;\n      },\n      get getItemInDataById() {\n        return getItemInDataById;\n      },\n      get useTodoItemList() {\n        return useTodoItemList;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","ref","getItemInDocById","getItemInDataById","useTodoItemList","todoList","id","title","text","position","x","window","innerWidth","y","innerHeight","z","menuToggle","lock","arrows","successItem","show","message","func","btn","yes","no","dragObject","arrowMode","arrowModeItems","firstItem","secondItem","arrowObject","mouseX","mouseY","offsetItemX","offsetItemY","itemTest","mouseMove","event","fixEvent","value","pageX","pageY","setItemPos","console","log","document","querySelector","style","concat","redrawArrows","clientX","html","documentElement","body","scrollLeft","clientLeft","clientY","scrollTop","clientTop","which","button","setDragObject","target","closest","getBoundingClientRect","left","top","classList","add","onselectstart","delDragObject","remove","setToTopItem","getAttribute","missArr","forEach","el","i","push","index","sort","prev","next","addNewItem","crypto","randomUUID","deleteItem","splice","getElementById","innerHTML","setArrows","showDeleteDiolog","type","setLockItem","todoItem","modalJustClose","modalDoIt","content","addNewTodoList","item","status","changeStatusTodoItem","itemId","listCount","todoId","addNewTodoItem","list","itt","reduce","acc","curr","findIndex","focus","removeTodoItem","length","removeFocusTodoItemInput","arrow","fi","si","firstItemXcenter","width","firstItemYcenter","height","secondItemXcenter","secondItemYcenter","startArrow","endArrow","offsetFirstItemX","offsetFirstItemY","offsetSecondItemX","offsetSecondItemY","Math","abs","docArrow","setAttribute","at","arrowModeSetter","secondArrowModeItem","createElement","className","append","addNewArrow","setItemMenuPosition","menuType","itemMenu","right","listener","removeEventListener","addEventListener","hoverFocusedItem","blurFocusedItem","querySelectorAll","setKeyListener","key","area"],"sources":["C:/Users/Setis/Documents/alex/vue-todo-app/src/App.vue"],"sourcesContent":["<template>\r\n    <main class=\"main\" @mousemove=\"mouseMove\" @mouseup=\"delDragObject\">\r\n        <div class=\"wrapper\">\r\n            <div\r\n                v-for=\"todo in todoList.list\"\r\n                :key=\"todo.id\"\r\n                :todo-id=\"todo.id\"\r\n                :style=\"`top: ${todo.position.y}px; left: ${todo.position.x}px; z-index: ${todo.position.z};`\"\r\n                class=\"todo__item component\"\r\n                :class=\"todo.lock ? 'lock' : ''\"\r\n                :menu-toggle=\"todo.menuToggle ? 'open' : 'hide'\"\r\n                @mouseup=\"setToTopItem\"\r\n                @click=\"addNewArrow\"\r\n                @mouseenter=\"mouseenterMaybeSetElement\"\r\n                @mouseleave=\"mouseleaveMaybeSetElement\"\r\n            >\r\n                <div class=\"todo__item_wrapper\">\r\n                    <div class=\"todo__item_head\">\r\n                        <span class=\"draggble\" @mousedown=\"setDragObject\"></span>\r\n\r\n                        <app-button type=\"button\" class=\"menu__toggle\" @click=\"setItemMenuPosition\">\r\n                            <span class=\"line\"></span>\r\n                            <span class=\"line\"></span>\r\n                            <span class=\"line\"></span>\r\n                        </app-button>\r\n\r\n                        <div class=\"todo__item_menu\" :menu-toggle=\"todo.menuToggle ? 'open' : 'hide'\">\r\n                            <ul class=\"list\">\r\n                                <li class=\"list__item\">\r\n                                    <app-button type=\"button\" @click=\"arrowModeSetter\">\r\n                                        <span class=\"i-expand-from-corner\" style=\"transform: translateY(-2px)\"></span>\r\n                                    </app-button>\r\n                                </li>\r\n                                <li class=\"list__item\">\r\n                                    <app-button type=\"button\">\r\n                                        <span class=\"i-file\"></span>\r\n                                    </app-button>\r\n                                </li>\r\n                                <li class=\"list__item\">\r\n                                    <app-button type=\"button\" @click=\"setLockItem\">\r\n                                        <span class=\"i-lock\"></span>\r\n                                    </app-button>\r\n                                </li>\r\n                                <li class=\"list__item\">\r\n                                    <app-button type=\"button\" @click=\"addNewTodoList\">\r\n                                        <span class=\"i-list-ul\"></span>\r\n                                    </app-button>\r\n                                </li>\r\n                                <li class=\"list__item\">\r\n                                    <app-button type=\"button\" @click=\"showDeleteDiolog\">\r\n                                        <span class=\"i-trash-alt\"></span>\r\n                                    </app-button>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"todo__item_body\">\r\n                        <div class=\"title\">\r\n                            <app-todo-input v-model=\"todo.title\" :placeholder=\"'Title'\" class=\"title\" />\r\n                        </div>\r\n\r\n                        <div class=\"text\">\r\n                            <div v-for=\"n in todo.text.length\" :key=\"n\" class=\"text__item\">\r\n                                <app-todo-text\r\n                                    v-if=\"typeof todo.text[n - 1] == 'string'\"\r\n                                    v-model=\"todo.text[n - 1]\"\r\n                                    :placeholder=\"'Напишите что-нибудь...'\"\r\n                                    class=\"default\"\r\n                                />\r\n                                <app-todo-list\r\n                                    v-else\r\n                                    :content=\"todo.text[n - 1]\"\r\n                                    :itemId=\"todo.id\"\r\n                                    :listCount=\"n - 1\"\r\n                                    @todo:changeStatus=\"changeStatusTodoItem\"\r\n                                    @todo:addItem=\"addNewTodoItem\"\r\n                                    @todo:removeItem=\"removeTodoItem\"\r\n                                    @input:blur=\"removeFocusTodoItemInput\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <span v-if=\"todo.lock\" class=\"locked__status i-lock\"></span>\r\n            </div>\r\n\r\n            <svg id=\"area\" viewbox=\"0 0 1600 900\"></svg>\r\n\r\n            <div v-if=\"todoList.length < 1\" class=\"items__none\">\r\n                <h3>Привет)) Как у тебя дела?</h3>\r\n                <app-button type=\"button\" class=\"items__none_button\" @click=\"addNewItem\">\r\n                    <span class=\"i-plus\"></span>\r\n                    <span>Нажми на меня</span>\r\n                </app-button>\r\n            </div>\r\n        </div>\r\n\r\n        <app-items-list\r\n            v-if=\"todoList.length > 0\"\r\n            :items=\"todoList\"\r\n            @item:hover=\"hoverFocusedItem\"\r\n            @item:blur=\"blurFocusedItem\"\r\n            @item:add=\"addNewItem\"\r\n        />\r\n        <app-modal-window-success\r\n            @func:success=\"deleteQuestion\"\r\n            :content=\"successItem\"\r\n            @modal:close=\"modalJustClose\"\r\n            @modal:success=\"modalDoIt\"\r\n        />\r\n\r\n        <div class=\"textAreaHeightResize\"></div>\r\n\r\n        {{ itemTest.list[0] }}\r\n    </main>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref } from \"vue\";\r\nimport { getItemInDocById, getItemInDataById } from \"@/hooks/getItem\";\r\nimport { useTodoItemList } from \"./hooks/useTodoItemList\";\r\n\r\n\r\nconst todoList = useTodoItemList([\r\n    {\r\n        id: 15,\r\n        title: \"Title\",\r\n        text: [\"Пустая строка\"],\r\n        position: {\r\n            x: window.innerWidth / 2 - 200,\r\n            y: window.innerHeight / 2 - 200,\r\n            z: 100,\r\n        },\r\n        menuToggle: false,\r\n        lock: false,\r\n    }\r\n]);\r\nconst arrows = ref([]);\r\n\r\nconst successItem = ref({\r\n    show: false,\r\n    message: \"\",\r\n    func: null,\r\n    btn: {\r\n        yes: \"\",\r\n        no: \"\",\r\n    },\r\n});\r\n\r\nlet dragObject = null;\r\nlet arrowMode = ref(false);\r\nlet arrowModeItems = ref({\r\n    firstItem: null,\r\n    secondItem: null,\r\n});\r\nlet arrowObject = ref(null);\r\n\r\n// <!-- ? item movement -->\r\n\r\nconst mouseX = ref(0);\r\nconst mouseY = ref(0);\r\n\r\nconst offsetItemX = ref(0);\r\nconst offsetItemY = ref(0);\r\n\r\n\r\nconst itemTest = useTodoItemList([\r\n    {\r\n        id: 15,\r\n        title: \"Title\",\r\n        text: [\"Пустая строка\"],\r\n        position: {\r\n            x: window.innerWidth / 2 - 200,\r\n            y: window.innerHeight / 2 - 200,\r\n            z: 100,\r\n        },\r\n        menuToggle: false,\r\n        lock: false,\r\n    }\r\n]);\r\n\r\nfunction mouseMove(event) {\r\n    event = fixEvent(event);\r\n    mouseX.value = event.pageX;\r\n    mouseY.value = event.pageY;\r\n\r\n    if (dragObject) {\r\n        itemTest.setItemPos(15, 100, 100);\r\n        console.log(itemTest)\r\n    }\r\n\r\n    if (arrowMode.value === true) {\r\n        document.querySelector(\".arrowModeSecondItem\").style = `position: absolute; width: 2px; height: 2px;top: ${\r\n            mouseY.value - 5\r\n        }px; left: ${mouseX.value - 5}px; pointer-events: none;`;\r\n        redrawArrows(null, arrows.value);\r\n    }\r\n}\r\n\r\n// function setPosToItem(dragObject, mouseX, mouseY, offsetItemX, offsetItemY) {\r\n\r\n    \r\n\r\n    // const todoItem = getItemInDataById(todoList.value, dragObject.getAttribute(\"todo-id\"));\r\n    // if (todoItem.lock) return;\r\n\r\n    // todoItem.position.x = mouseX - offsetItemX;\r\n    // // <!-- ? For not moving bottom them max -->\r\n    // if (mouseY + dragObject.getBoundingClientRect().height / 3 < window.innerHeight && mouseY > 20) {\r\n    //     todoItem.position.y = mouseY - offsetItemY;\r\n    // }\r\n\r\n    // redrawArrows(dragObject, arrows.value);\r\n// }\r\n\r\nfunction fixEvent(event) {\r\n    event = event || window.event;\r\n\r\n    if (event.pageX == null && event.clientX != null) {\r\n        let html = document.documentElement;\r\n        let body = document.body;\r\n\r\n        event.pageX =\r\n            event.clientX + ((html && html.scrollLeft) || (body && body.scrollLeft) || 0) - (html.clientLeft || 0);\r\n        event.pageY =\r\n            event.clientY + ((html && html.scrollTop) || (body && body.scrollTop) || 0) - (html.clientTop || 0);\r\n    }\r\n\r\n    if (!event.which && event.button) {\r\n        event.which = event.button & 1 ? 1 : event.button & 2 ? 3 : event.button & 4 ? 2 : 0;\r\n    }\r\n\r\n    return event;\r\n}\r\n\r\nfunction setDragObject(event) {\r\n    dragObject = event.target.closest(\".todo__item\");\r\n    offsetItemX.value = mouseX.value - dragObject.getBoundingClientRect().left;\r\n    offsetItemY.value = mouseY.value - dragObject.getBoundingClientRect().top;\r\n    dragObject.classList.add(\"drag\");\r\n    document.body.onselectstart = function () {\r\n        return false;\r\n    };\r\n}\r\n\r\nfunction delDragObject() {\r\n    if (dragObject) {\r\n        dragObject.classList.remove(\"drag\");\r\n        dragObject = null;\r\n        document.body.onselectstart = function () {};\r\n    }\r\n}\r\n\r\nfunction setToTopItem(event) {\r\n    if (getItemInDataById(todoList.value, event.target.closest(\".todo__item\").getAttribute(\"todo-id\")).lock) return;\r\n\r\n    getItemInDataById(todoList.value, event.target.closest(\".todo__item\").getAttribute(\"todo-id\")).position.z = 100;\r\n    let missArr = [];\r\n    todoList.value.forEach((el, i) => {\r\n        missArr.push({\r\n            index: i,\r\n            z: el.position.z,\r\n        });\r\n    });\r\n    missArr = missArr.sort((prev, next) => prev.z - next.z);\r\n    missArr.forEach((el, i) => {\r\n        el.z = i + 10;\r\n        todoList.value[el.index].position.z = el.z;\r\n    });\r\n}\r\n\r\n// <!-- ? Item functional -->\r\n\r\nfunction addNewItem() {\r\n    todoList.value.push({\r\n        id: crypto.randomUUID(),\r\n        title: \"Title\",\r\n        text: [\"Пустая строка\"],\r\n        position: {\r\n            x: window.innerWidth / 2 - 200,\r\n            y: window.innerHeight / 2 - 200,\r\n            z: 100,\r\n        },\r\n        menuToggle: false,\r\n        lock: false,\r\n    });\r\n}\r\n\r\nfunction deleteItem(id) {\r\n    todoList.value.forEach((el, index) => {\r\n        if (el.id === id) todoList.value.splice(index, 1);\r\n    });\r\n\r\n    arrows.value.forEach((el, index) => {\r\n        if(el.firstItem === id || el.secondItem === id) {\r\n            arrows.value.splice(index, 1);\r\n            document.getElementById(\"area\").innerHTML = '';\r\n            arrows.value.forEach((el) => {\r\n                setArrows(el, getItemInDocById(el.firstItem), getItemInDocById(el.secondItem));\r\n            });\r\n        }\r\n    })\r\n}\r\n\r\nfunction showDeleteDiolog(event) {\r\n    successItem.value = {\r\n        show: true,\r\n        message: \"Удалить этот пин?\",\r\n        func: {\r\n            type: \"item:delete\",\r\n            id: event.target.closest(\".todo__item\").getAttribute(\"todo-id\"),\r\n        },\r\n        btn: {\r\n            yes: \"Удалить\",\r\n            no: \"Отмена\",\r\n        },\r\n    };\r\n}\r\n\r\nfunction setLockItem(event) {\r\n    const todoItem = getItemInDataById(todoList.value, event.target.closest(\".todo__item\").getAttribute(\"todo-id\"));\r\n    todoItem.lock = !todoItem.lock;\r\n    todoItem.menuToggle = false;\r\n}\r\n\r\n// <!-- ? Modal Window functional -->\r\n\r\nfunction modalJustClose() {\r\n    successItem.value = {\r\n        show: false,\r\n        message: \"\",\r\n        func: null,\r\n        btn: {\r\n            yes: \"\",\r\n            no: \"\",\r\n        },\r\n    };\r\n}\r\n\r\nfunction modalDoIt(content) {\r\n    if (content.type === \"item:delete\") {\r\n        deleteItem(content.id);\r\n    }\r\n    modalJustClose();\r\n}\r\n\r\n// <!-- ? Todo -->\r\nfunction addNewTodoList(event) {\r\n    const item = getItemInDataById(todoList.value, event.target.closest(\".todo__item\").getAttribute(\"todo-id\"));\r\n    item.text.push([\r\n        {\r\n            id: 1,\r\n            text: \"\",\r\n            status: false,\r\n        },\r\n    ]);\r\n    item.text.push(\"\");\r\n}\r\n\r\nfunction changeStatusTodoItem(status) {\r\n    let item = getItemInDataById(todoList.value, status.itemId);\r\n    getItemInDataById(item.text[status.listCount], status.todoId).status = !getItemInDataById(\r\n        item.text[status.listCount],\r\n        status.todoId\r\n    ).status;\r\n}\r\n\r\nfunction addNewTodoItem(status) {\r\n    const list = getItemInDataById(todoList.value, status.itemId).text[status.listCount];\r\n\r\n    let itt = list.reduce(function (acc, curr) {\r\n        if (acc.id > curr.id) return acc;\r\n        else return curr;\r\n    });\r\n\r\n    list.splice(list.findIndex((el) => el.id == status.todoId) + 1, 0, {\r\n        id: itt.id + 1,\r\n        text: \"\",\r\n        status: false,\r\n        focus: true,\r\n    });\r\n}\r\n\r\nfunction removeTodoItem(status) {\r\n    const item = getItemInDataById(todoList.value, status.itemId);\r\n    const list = item.text[status.listCount];\r\n    list.splice(\r\n        list.findIndex((el) => el.id == status.todoId),\r\n        1\r\n    );\r\n\r\n    if (!list.length) {\r\n        if (typeof item.text[status.listCount - 1] === \"string\") {\r\n            if (typeof item.text[status.listCount + 1] === \"string\") {\r\n                item.text[status.listCount - 1] += item.text[status.listCount + 1];\r\n                item.text.splice(status.listCount + 1, 1);\r\n            }\r\n        } else {\r\n            if (typeof item.text[status.listCount + 1] !== \"string\") {\r\n                item.text.splice(status.listCount - 1, 0, \"\");\r\n            }\r\n        }\r\n\r\n        item.text.splice(status.listCount, 1);\r\n    }\r\n}\r\n\r\nfunction removeFocusTodoItemInput(status) {\r\n    const list = getItemInDataById(todoList.value, status.itemId).text[status.listCount];\r\n    list[list.findIndex((el) => el.id == status.todoId)].focus = false;\r\n}\r\n\r\n// <!-- ? Arrows -->\r\n\r\nfunction setArrows(arrow, fi, si) {\r\n    const firstItem = fi.getBoundingClientRect();\r\n    const secondItem = si.getBoundingClientRect();\r\n\r\n    const firstItemXcenter = firstItem.left + firstItem.width / 2,\r\n        firstItemYcenter = firstItem.top + firstItem.height / 2,\r\n        secondItemXcenter = secondItem.left + secondItem.width / 2,\r\n        secondItemYcenter = secondItem.top + secondItem.height / 2;\r\n\r\n    let startArrow = { x: 0, y: 0 };\r\n    let endArrow = { x: 0, y: 0 };\r\n\r\n    let offsetFirstItemX = 0;\r\n    let offsetFirstItemY = 0;\r\n    let offsetSecondItemX = 0;\r\n    let offsetSecondItemY = 0;\r\n\r\n    if (Math.abs(firstItemXcenter - secondItemXcenter) > Math.abs(firstItemYcenter - secondItemYcenter)) {\r\n        offsetFirstItemX = firstItem.width / 2;\r\n        offsetFirstItemY = firstItem.height / 4;\r\n        offsetSecondItemX = secondItem.width / 2;\r\n        offsetSecondItemY = secondItem.height / 4;\r\n\r\n        if (Math.abs(firstItemYcenter - secondItemYcenter) < 100) {\r\n            offsetFirstItemY = 0;\r\n            offsetSecondItemY = 0;\r\n        }\r\n    } else {\r\n        offsetFirstItemX = firstItem.width / 4;\r\n        offsetFirstItemY = firstItem.height / 2;\r\n        offsetSecondItemX = secondItem.width / 4;\r\n        offsetSecondItemY = secondItem.height / 2;\r\n    }\r\n\r\n    if (firstItemXcenter > secondItemXcenter) {\r\n        // <!-- * 2nd item left side -->\r\n        startArrow.x = firstItemXcenter - offsetFirstItemX;\r\n        endArrow.x = secondItemXcenter + offsetSecondItemX;\r\n    } else {\r\n        // <!-- * 2nd item right side -->\r\n        startArrow.x = firstItemXcenter + offsetFirstItemX;\r\n        endArrow.x = secondItemXcenter - offsetSecondItemX;\r\n    }\r\n\r\n    if (firstItemYcenter > secondItemYcenter) {\r\n        // <!-- * 2nd item top -->\r\n        startArrow.y = firstItemYcenter - offsetFirstItemY;\r\n        endArrow.y = secondItemYcenter + offsetSecondItemY;\r\n    } else {\r\n        // <!-- * 2nd item bottom -->\r\n        startArrow.y = firstItemYcenter + offsetFirstItemY;\r\n        endArrow.y = secondItemYcenter - offsetSecondItemY;\r\n    }\r\n\r\n    const docArrow = document.querySelector(`#area g[arrow-id='${arrow.id}']`);\r\n    if (!docArrow) {\r\n        document.getElementById(\"area\").innerHTML += `\r\n            <g arrow-id='${arrow.id}' class=\"arrow__line\">\r\n                <defs>\r\n                    <marker id=\"arrowhead\" markerWidth=\"5\" markerHeight=\"4\" refX=\"5\" refY=\"2\" orient=\"auto\">\r\n                        <polygon points=\"0 0, 5 2, 0 4\" />\r\n                    </marker>\r\n                </defs>\r\n                <line class=\"line__main\" x1=\"${startArrow.x}\" y1=\"${startArrow.y}\" x2=\"${endArrow.x}\" y2=\"${endArrow.y}\" stroke-width=\"3\" marker-end=\"url(#arrowhead)\" />\r\n            </g>\r\n        `;\r\n    } else {\r\n        docArrow.querySelector(\".line__main\").setAttribute(\"x1\", startArrow.x);\r\n        docArrow.querySelector(\".line__main\").setAttribute(\"y1\", startArrow.y);\r\n        docArrow.querySelector(\".line__main\").setAttribute(\"x2\", endArrow.x);\r\n        docArrow.querySelector(\".line__main\").setAttribute(\"y2\", endArrow.y);\r\n    }\r\n}\r\n\r\nfunction redrawArrows(dragObject, arrows) {\r\n    if (arrowMode.value === true) {\r\n        setArrows(arrows.at(-1), getItemInDocById(arrows.at(-1).firstItem), arrows.at(-1).secondItem);\r\n        return;\r\n    }\r\n\r\n    const todoItem = getItemInDataById(todoList.value, dragObject.getAttribute(\"todo-id\"));\r\n    arrows.forEach((el) => {\r\n        if (todoItem.id == el.firstItem || todoItem.id == el.secondItem) {\r\n            setArrows(el, getItemInDocById(el.firstItem), getItemInDocById(el.secondItem));\r\n        }\r\n    });\r\n}\r\n\r\nfunction arrowModeSetter(event) {\r\n    arrowMode.value = true;\r\n    const secondArrowModeItem = document.createElement(\"div\");\r\n    secondArrowModeItem.className = \"arrowModeSecondItem\";\r\n    document.querySelector(\".main\").append(secondArrowModeItem);\r\n\r\n    arrowModeItems.value.firstItem = event.target.closest(\".todo__item\");\r\n    arrowModeItems.value.secondItem = secondArrowModeItem;\r\n\r\n    arrows.value.push({\r\n        id: crypto.randomUUID(),\r\n        firstItem: event.target.closest(\".todo__item\").getAttribute(\"todo-id\"),\r\n        secondItem: secondArrowModeItem,\r\n    });\r\n\r\n    setArrows(arrows.value.at(-1), getItemInDocById(arrows.value.at(-1).firstItem), arrows.value.at(-1).secondItem);\r\n\r\n    getItemInDataById(todoList.value, event.target.closest(\".todo__item\").getAttribute(\"todo-id\")).menuToggle = false;\r\n}\r\n\r\nfunction addNewArrow(event) {\r\n    if (!arrowMode.value) return;\r\n\r\n    if (event.target.closest(\".todo__item\")) {\r\n        const item = event.target.closest(\".todo__item\");\r\n        if (item.getAttribute(\"todo-id\") === arrows.value.at(-1).firstItem) return;\r\n\r\n        arrows.value.at(-1).secondItem = item.getAttribute(\"todo-id\");\r\n\r\n        arrowMode.value = false;\r\n        arrowModeItems.value.firstItem = null;\r\n        arrowModeItems.value.secondItem = null;\r\n\r\n        document.querySelector(\".arrowModeSecondItem\").remove();\r\n    }\r\n\r\n    arrows.value.forEach((el) => {\r\n        setArrows(el, getItemInDocById(el.firstItem), getItemInDocById(el.secondItem));\r\n    });\r\n}\r\n\r\n// <!-- ? Item menu position -->\r\nfunction setItemMenuPosition(event) {\r\n    let menuType = \"menu\";\r\n    const item = event.target.closest(\".todo__item\");\r\n    const itemMenu = getItemInDataById(todoList.value, item.getAttribute(\"todo-id\"));\r\n    itemMenu.menuToggle = !itemMenu.menuToggle;\r\n\r\n    if (window.innerWidth - item.getBoundingClientRect().right < 180) {\r\n        menuType += \"-left\";\r\n    } else {\r\n        menuType += \"-right\";\r\n    }\r\n    if (item.getBoundingClientRect().top < 120) {\r\n        menuType += \"-bottom\";\r\n    } else {\r\n        menuType += \"-top\";\r\n    }\r\n\r\n    item.setAttribute(\"menu-type\", menuType);\r\n\r\n    const listener = (event) => {\r\n        if (!event.target.closest(\".todo__item\")) {\r\n            if (event.target.closest(\".component\")) {\r\n                itemMenu.menuToggle = false;\r\n                document.removeEventListener(\"click\", listener, false);\r\n            }\r\n        } else {\r\n            if (event.target.closest(\".todo__item\").getAttribute(\"todo-id\") !== item.getAttribute(\"todo-id\")) {\r\n                itemMenu.menuToggle = false;\r\n                document.removeEventListener(\"click\", listener, false);\r\n            }\r\n        }\r\n    };\r\n\r\n    document.addEventListener(\"click\", listener, false);\r\n}\r\n\r\n// <!-- ? Items list function -->\r\n\r\nfunction hoverFocusedItem(id) {\r\n    getItemInDocById(id).classList.add(\"hover\");\r\n}\r\n\r\nfunction blurFocusedItem() {\r\n    document.querySelectorAll(\".todo__item\").forEach((el) => el.classList.remove(\"hover\"));\r\n}\r\n\r\n// <!-- ? Dop functions -->\r\n\r\nfunction setKeyListener() {\r\n    document.addEventListener(\"keydown\", (event) => {\r\n        if(event.key === \"Delete\" ) {\r\n            if(arrowObject.value) {\r\n                arrows.value.forEach((el, index) => {\r\n                    if(el.id === arrowObject.value.getAttribute(\"arrow-id\")) {\r\n                        console.log(\"123\")\r\n                        arrows.value.splice(index, 1);\r\n                    }\r\n\r\n                    document.getElementById(\"area\").innerHTML = '';\r\n                    arrows.value.forEach((el) => {\r\n                        setArrows(el, getItemInDocById(el.firstItem), getItemInDocById(el.secondItem));\r\n                    });\r\n\r\n                    if(!arrows.value.length) {\r\n                        document.getElementById(\"area\").innerHTML = '';\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nonMounted(() => {\r\n    let area = document.getElementById(\"area\");\r\n\r\n    area.setAttribute(\"width\", window.innerWidth);\r\n    area.setAttribute(\"height\", window.innerHeight);\r\n\r\n    area.addEventListener(\"click\", (event) => {\r\n        if(event.target.closest(\".arrow__line\") !== null) {\r\n            arrowObject.value = event.target.closest(\".arrow__line\");\r\n            event.target.closest(\".arrow__line\").classList.add(\"focused\");\r\n        }else{\r\n            arrowObject.value = null;\r\n        }\r\n    })\r\n\r\n    arrows.value.forEach((el) => {\r\n        setArrows(el, getItemInDocById(el.firstItem), getItemInDocById(el.secondItem));\r\n    });\r\n\r\n    window.addEventListener(\"resize\", () => {\r\n        arrows.value.forEach((el) => {\r\n            setArrows(el, getItemInDocById(el.firstItem), getItemInDocById(el.secondItem));\r\n        });\r\n    });\r\n\r\n    setKeyListener();\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@use '@/assets/scss/theme/_theme_main.scss'\r\n</style>\r\n"],"mappings":";;;;;;;;;;;;AAuHA,SAASA,SAAS,EAAEC,GAAG,QAAQ,KAAK;AACpC,SAASC,gBAAgB,EAAEC,iBAAiB,QAAQ,iBAAiB;AACrE,SAASC,eAAe,QAAQ,yBAAyB;;;;;;IAGzD,IAAMC,QAAQ,GAAGD,eAAe,CAAC,CAC7B;MACIE,EAAE,EAAE,EAAE;MACNC,KAAK,EAAE,OAAO;MACdC,IAAI,EAAE,CAAC,eAAe,CAAC;MACvBC,QAAQ,EAAE;QACNC,CAAC,EAAEC,MAAM,CAACC,UAAU,GAAG,CAAC,GAAG,GAAG;QAC9BC,CAAC,EAAEF,MAAM,CAACG,WAAW,GAAG,CAAC,GAAG,GAAG;QAC/BC,CAAC,EAAE;MACP,CAAC;MACDC,UAAU,EAAE,KAAK;MACjBC,IAAI,EAAE;IACV,CAAC,CACJ,CAAC;IACF,IAAMC,MAAM,GAAGjB,GAAG,CAAC,EAAE,CAAC;IAEtB,IAAMkB,WAAW,GAAGlB,GAAG,CAAC;MACpBmB,IAAI,EAAE,KAAK;MACXC,OAAO,EAAE,EAAE;MACXC,IAAI,EAAE,IAAI;MACVC,GAAG,EAAE;QACDC,GAAG,EAAE,EAAE;QACPC,EAAE,EAAE;MACR;IACJ,CAAC,CAAC;IAEF,IAAIC,UAAU,GAAG,IAAI;IACrB,IAAIC,SAAS,GAAG1B,GAAG,CAAC,KAAK,CAAC;IAC1B,IAAI2B,cAAc,GAAG3B,GAAG,CAAC;MACrB4B,SAAS,EAAE,IAAI;MACfC,UAAU,EAAE;IAChB,CAAC,CAAC;IACF,IAAIC,WAAW,GAAG9B,GAAG,CAAC,IAAI,CAAC;;IAE3B;;IAEA,IAAM+B,MAAM,GAAG/B,GAAG,CAAC,CAAC,CAAC;IACrB,IAAMgC,MAAM,GAAGhC,GAAG,CAAC,CAAC,CAAC;IAErB,IAAMiC,WAAW,GAAGjC,GAAG,CAAC,CAAC,CAAC;IAC1B,IAAMkC,WAAW,GAAGlC,GAAG,CAAC,CAAC,CAAC;IAG1B,IAAMmC,QAAQ,GAAGhC,eAAe,CAAC,CAC7B;MACIE,EAAE,EAAE,EAAE;MACNC,KAAK,EAAE,OAAO;MACdC,IAAI,EAAE,CAAC,eAAe,CAAC;MACvBC,QAAQ,EAAE;QACNC,CAAC,EAAEC,MAAM,CAACC,UAAU,GAAG,CAAC,GAAG,GAAG;QAC9BC,CAAC,EAAEF,MAAM,CAACG,WAAW,GAAG,CAAC,GAAG,GAAG;QAC/BC,CAAC,EAAE;MACP,CAAC;MACDC,UAAU,EAAE,KAAK;MACjBC,IAAI,EAAE;IACV,CAAC,CACJ,CAAC;IAEF,SAASoB,SAASA,CAACC,KAAK,EAAE;MACtBA,KAAK,GAAGC,QAAQ,CAACD,KAAK,CAAC;MACvBN,MAAM,CAACQ,KAAK,GAAGF,KAAK,CAACG,KAAK;MAC1BR,MAAM,CAACO,KAAK,GAAGF,KAAK,CAACI,KAAK;MAE1B,IAAIhB,UAAU,EAAE;QACZU,QAAQ,CAACO,UAAU,CAAC,EAAE,EAAE,GAAG,EAAE,GAAG,CAAC;QACjCC,OAAO,CAACC,GAAG,CAACT,QAAQ,CAAC;MACzB;MAEA,IAAIT,SAAS,CAACa,KAAK,KAAK,IAAI,EAAE;QAC1BM,QAAQ,CAACC,aAAa,CAAC,sBAAsB,CAAC,CAACC,KAAK,uDAAAC,MAAA,CAChDhB,MAAM,CAACO,KAAK,GAAG,CAAC,gBAAAS,MAAA,CACPjB,MAAM,CAACQ,KAAK,GAAG,CAAC,8BAA2B;QACxDU,YAAY,CAAC,IAAI,EAAEhC,MAAM,CAACsB,KAAK,CAAC;MACpC;IACJ;;IAEA;;IAII;IACA;;IAEA;IACA;IACA;IACA;IACA;;IAEA;IACJ;;IAEA,SAASD,QAAQA,CAACD,KAAK,EAAE;MACrBA,KAAK,GAAGA,KAAK,IAAI3B,MAAM,CAAC2B,KAAK;MAE7B,IAAIA,KAAK,CAACG,KAAK,IAAI,IAAI,IAAIH,KAAK,CAACa,OAAO,IAAI,IAAI,EAAE;QAC9C,IAAIC,IAAI,GAAGN,QAAQ,CAACO,eAAe;QACnC,IAAIC,IAAI,GAAGR,QAAQ,CAACQ,IAAI;QAExBhB,KAAK,CAACG,KAAK,GACPH,KAAK,CAACa,OAAO,IAAKC,IAAI,IAAIA,IAAI,CAACG,UAAU,IAAMD,IAAI,IAAIA,IAAI,CAACC,UAAW,IAAI,CAAC,CAAC,IAAIH,IAAI,CAACI,UAAU,IAAI,CAAC,CAAC;QAC1GlB,KAAK,CAACI,KAAK,GACPJ,KAAK,CAACmB,OAAO,IAAKL,IAAI,IAAIA,IAAI,CAACM,SAAS,IAAMJ,IAAI,IAAIA,IAAI,CAACI,SAAU,IAAI,CAAC,CAAC,IAAIN,IAAI,CAACO,SAAS,IAAI,CAAC,CAAC;MAC3G;MAEA,IAAI,CAACrB,KAAK,CAACsB,KAAK,IAAItB,KAAK,CAACuB,MAAM,EAAE;QAC9BvB,KAAK,CAACsB,KAAK,GAAGtB,KAAK,CAACuB,MAAM,GAAG,CAAC,GAAG,CAAC,GAAGvB,KAAK,CAACuB,MAAM,GAAG,CAAC,GAAG,CAAC,GAAGvB,KAAK,CAACuB,MAAM,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC;MACxF;MAEA,OAAOvB,KAAK;IAChB;IAEA,SAASwB,aAAaA,CAACxB,KAAK,EAAE;MAC1BZ,UAAU,GAAGY,KAAK,CAACyB,MAAM,CAACC,OAAO,CAAC,aAAa,CAAC;MAChD9B,WAAW,CAACM,KAAK,GAAGR,MAAM,CAACQ,KAAK,GAAGd,UAAU,CAACuC,qBAAqB,EAAE,CAACC,IAAI;MAC1E/B,WAAW,CAACK,KAAK,GAAGP,MAAM,CAACO,KAAK,GAAGd,UAAU,CAACuC,qBAAqB,EAAE,CAACE,GAAG;MACzEzC,UAAU,CAAC0C,SAAS,CAACC,GAAG,CAAC,MAAM,CAAC;MAChCvB,QAAQ,CAACQ,IAAI,CAACgB,aAAa,GAAG,YAAY;QACtC,OAAO,KAAK;MAChB,CAAC;IACL;IAEA,SAASC,aAAaA,CAAA,EAAG;MACrB,IAAI7C,UAAU,EAAE;QACZA,UAAU,CAAC0C,SAAS,CAACI,MAAM,CAAC,MAAM,CAAC;QACnC9C,UAAU,GAAG,IAAI;QACjBoB,QAAQ,CAACQ,IAAI,CAACgB,aAAa,GAAG,YAAY,CAAC,CAAC;MAChD;IACJ;IAEA,SAASG,YAAYA,CAACnC,KAAK,EAAE;MACzB,IAAInC,iBAAiB,CAACE,QAAQ,CAACmC,KAAK,EAAEF,KAAK,CAACyB,MAAM,CAACC,OAAO,CAAC,aAAa,CAAC,CAACU,YAAY,CAAC,SAAS,CAAC,CAAC,CAACzD,IAAI,EAAE;MAEzGd,iBAAiB,CAACE,QAAQ,CAACmC,KAAK,EAAEF,KAAK,CAACyB,MAAM,CAACC,OAAO,CAAC,aAAa,CAAC,CAACU,YAAY,CAAC,SAAS,CAAC,CAAC,CAACjE,QAAQ,CAACM,CAAC,GAAG,GAAG;MAC/G,IAAI4D,OAAO,GAAG,EAAE;MAChBtE,QAAQ,CAACmC,KAAK,CAACoC,OAAO,CAAC,UAACC,EAAE,EAAEC,CAAC,EAAK;QAC9BH,OAAO,CAACI,IAAI,CAAC;UACTC,KAAK,EAAEF,CAAC;UACR/D,CAAC,EAAE8D,EAAE,CAACpE,QAAQ,CAACM;QACnB,CAAC,CAAC;MACN,CAAC,CAAC;MACF4D,OAAO,GAAGA,OAAO,CAACM,IAAI,CAAC,UAACC,IAAI,EAAEC,IAAI;QAAA,OAAKD,IAAI,CAACnE,CAAC,GAAGoE,IAAI,CAACpE,CAAC;MAAA,EAAC;MACvD4D,OAAO,CAACC,OAAO,CAAC,UAACC,EAAE,EAAEC,CAAC,EAAK;QACvBD,EAAE,CAAC9D,CAAC,GAAG+D,CAAC,GAAG,EAAE;QACbzE,QAAQ,CAACmC,KAAK,CAACqC,EAAE,CAACG,KAAK,CAAC,CAACvE,QAAQ,CAACM,CAAC,GAAG8D,EAAE,CAAC9D,CAAC;MAC9C,CAAC,CAAC;IACN;;IAEA;;IAEA,SAASqE,UAAUA,CAAA,EAAG;MAClB/E,QAAQ,CAACmC,KAAK,CAACuC,IAAI,CAAC;QAChBzE,EAAE,EAAE+E,MAAM,CAACC,UAAU,EAAE;QACvB/E,KAAK,EAAE,OAAO;QACdC,IAAI,EAAE,CAAC,eAAe,CAAC;QACvBC,QAAQ,EAAE;UACNC,CAAC,EAAEC,MAAM,CAACC,UAAU,GAAG,CAAC,GAAG,GAAG;UAC9BC,CAAC,EAAEF,MAAM,CAACG,WAAW,GAAG,CAAC,GAAG,GAAG;UAC/BC,CAAC,EAAE;QACP,CAAC;QACDC,UAAU,EAAE,KAAK;QACjBC,IAAI,EAAE;MACV,CAAC,CAAC;IACN;IAEA,SAASsE,UAAUA,CAACjF,EAAE,EAAE;MACpBD,QAAQ,CAACmC,KAAK,CAACoC,OAAO,CAAC,UAACC,EAAE,EAAEG,KAAK,EAAK;QAClC,IAAIH,EAAE,CAACvE,EAAE,KAAKA,EAAE,EAAED,QAAQ,CAACmC,KAAK,CAACgD,MAAM,CAACR,KAAK,EAAE,CAAC,CAAC;MACrD,CAAC,CAAC;MAEF9D,MAAM,CAACsB,KAAK,CAACoC,OAAO,CAAC,UAACC,EAAE,EAAEG,KAAK,EAAK;QAChC,IAAGH,EAAE,CAAChD,SAAS,KAAKvB,EAAE,IAAIuE,EAAE,CAAC/C,UAAU,KAAKxB,EAAE,EAAE;UAC5CY,MAAM,CAACsB,KAAK,CAACgD,MAAM,CAACR,KAAK,EAAE,CAAC,CAAC;UAC7BlC,QAAQ,CAAC2C,cAAc,CAAC,MAAM,CAAC,CAACC,SAAS,GAAG,EAAE;UAC9CxE,MAAM,CAACsB,KAAK,CAACoC,OAAO,CAAC,UAACC,EAAE,EAAK;YACzBc,SAAS,CAACd,EAAE,EAAE3E,gBAAgB,CAAC2E,EAAE,CAAChD,SAAS,CAAC,EAAE3B,gBAAgB,CAAC2E,EAAE,CAAC/C,UAAU,CAAC,CAAC;UAClF,CAAC,CAAC;QACN;MACJ,CAAC,CAAC;IACN;IAEA,SAAS8D,gBAAgBA,CAACtD,KAAK,EAAE;MAC7BnB,WAAW,CAACqB,KAAK,GAAG;QAChBpB,IAAI,EAAE,IAAI;QACVC,OAAO,EAAE,mBAAmB;QAC5BC,IAAI,EAAE;UACFuE,IAAI,EAAE,aAAa;UACnBvF,EAAE,EAAEgC,KAAK,CAACyB,MAAM,CAACC,OAAO,CAAC,aAAa,CAAC,CAACU,YAAY,CAAC,SAAS;QAClE,CAAC;QACDnD,GAAG,EAAE;UACDC,GAAG,EAAE,SAAS;UACdC,EAAE,EAAE;QACR;MACJ,CAAC;IACL;IAEA,SAASqE,WAAWA,CAACxD,KAAK,EAAE;MACxB,IAAMyD,QAAQ,GAAG5F,iBAAiB,CAACE,QAAQ,CAACmC,KAAK,EAAEF,KAAK,CAACyB,MAAM,CAACC,OAAO,CAAC,aAAa,CAAC,CAACU,YAAY,CAAC,SAAS,CAAC,CAAC;MAC/GqB,QAAQ,CAAC9E,IAAI,GAAG,CAAC8E,QAAQ,CAAC9E,IAAI;MAC9B8E,QAAQ,CAAC/E,UAAU,GAAG,KAAK;IAC/B;;IAEA;;IAEA,SAASgF,cAAcA,CAAA,EAAG;MACtB7E,WAAW,CAACqB,KAAK,GAAG;QAChBpB,IAAI,EAAE,KAAK;QACXC,OAAO,EAAE,EAAE;QACXC,IAAI,EAAE,IAAI;QACVC,GAAG,EAAE;UACDC,GAAG,EAAE,EAAE;UACPC,EAAE,EAAE;QACR;MACJ,CAAC;IACL;IAEA,SAASwE,SAASA,CAACC,OAAO,EAAE;MACxB,IAAIA,OAAO,CAACL,IAAI,KAAK,aAAa,EAAE;QAChCN,UAAU,CAACW,OAAO,CAAC5F,EAAE,CAAC;MAC1B;MACA0F,cAAc,EAAE;IACpB;;IAEA;IACA,SAASG,cAAcA,CAAC7D,KAAK,EAAE;MAC3B,IAAM8D,IAAI,GAAGjG,iBAAiB,CAACE,QAAQ,CAACmC,KAAK,EAAEF,KAAK,CAACyB,MAAM,CAACC,OAAO,CAAC,aAAa,CAAC,CAACU,YAAY,CAAC,SAAS,CAAC,CAAC;MAC3G0B,IAAI,CAAC5F,IAAI,CAACuE,IAAI,CAAC,CACX;QACIzE,EAAE,EAAE,CAAC;QACLE,IAAI,EAAE,EAAE;QACR6F,MAAM,EAAE;MACZ,CAAC,CACJ,CAAC;MACFD,IAAI,CAAC5F,IAAI,CAACuE,IAAI,CAAC,EAAE,CAAC;IACtB;IAEA,SAASuB,oBAAoBA,CAACD,MAAM,EAAE;MAClC,IAAID,IAAI,GAAGjG,iBAAiB,CAACE,QAAQ,CAACmC,KAAK,EAAE6D,MAAM,CAACE,MAAM,CAAC;MAC3DpG,iBAAiB,CAACiG,IAAI,CAAC5F,IAAI,CAAC6F,MAAM,CAACG,SAAS,CAAC,EAAEH,MAAM,CAACI,MAAM,CAAC,CAACJ,MAAM,GAAG,CAAClG,iBAAiB,CACrFiG,IAAI,CAAC5F,IAAI,CAAC6F,MAAM,CAACG,SAAS,CAAC,EAC3BH,MAAM,CAACI,MAAM,CAChB,CAACJ,MAAM;IACZ;IAEA,SAASK,cAAcA,CAACL,MAAM,EAAE;MAC5B,IAAMM,IAAI,GAAGxG,iBAAiB,CAACE,QAAQ,CAACmC,KAAK,EAAE6D,MAAM,CAACE,MAAM,CAAC,CAAC/F,IAAI,CAAC6F,MAAM,CAACG,SAAS,CAAC;MAEpF,IAAII,GAAG,GAAGD,IAAI,CAACE,MAAM,CAAC,UAAUC,GAAG,EAAEC,IAAI,EAAE;QACvC,IAAID,GAAG,CAACxG,EAAE,GAAGyG,IAAI,CAACzG,EAAE,EAAE,OAAOwG,GAAG,CAAC,KAC5B,OAAOC,IAAI;MACpB,CAAC,CAAC;MAEFJ,IAAI,CAACnB,MAAM,CAACmB,IAAI,CAACK,SAAS,CAAC,UAACnC,EAAE;QAAA,OAAKA,EAAE,CAACvE,EAAE,IAAI+F,MAAM,CAACI,MAAM;MAAA,EAAC,GAAG,CAAC,EAAE,CAAC,EAAE;QAC/DnG,EAAE,EAAEsG,GAAG,CAACtG,EAAE,GAAG,CAAC;QACdE,IAAI,EAAE,EAAE;QACR6F,MAAM,EAAE,KAAK;QACbY,KAAK,EAAE;MACX,CAAC,CAAC;IACN;IAEA,SAASC,cAAcA,CAACb,MAAM,EAAE;MAC5B,IAAMD,IAAI,GAAGjG,iBAAiB,CAACE,QAAQ,CAACmC,KAAK,EAAE6D,MAAM,CAACE,MAAM,CAAC;MAC7D,IAAMI,IAAI,GAAGP,IAAI,CAAC5F,IAAI,CAAC6F,MAAM,CAACG,SAAS,CAAC;MACxCG,IAAI,CAACnB,MAAM,CACPmB,IAAI,CAACK,SAAS,CAAC,UAACnC,EAAE;QAAA,OAAKA,EAAE,CAACvE,EAAE,IAAI+F,MAAM,CAACI,MAAM;MAAA,EAAC,EAC9C,CAAC,CACJ;MAED,IAAI,CAACE,IAAI,CAACQ,MAAM,EAAE;QACd,IAAI,OAAOf,IAAI,CAAC5F,IAAI,CAAC6F,MAAM,CAACG,SAAS,GAAG,CAAC,CAAC,KAAK,QAAQ,EAAE;UACrD,IAAI,OAAOJ,IAAI,CAAC5F,IAAI,CAAC6F,MAAM,CAACG,SAAS,GAAG,CAAC,CAAC,KAAK,QAAQ,EAAE;YACrDJ,IAAI,CAAC5F,IAAI,CAAC6F,MAAM,CAACG,SAAS,GAAG,CAAC,CAAC,IAAIJ,IAAI,CAAC5F,IAAI,CAAC6F,MAAM,CAACG,SAAS,GAAG,CAAC,CAAC;YAClEJ,IAAI,CAAC5F,IAAI,CAACgF,MAAM,CAACa,MAAM,CAACG,SAAS,GAAG,CAAC,EAAE,CAAC,CAAC;UAC7C;QACJ,CAAC,MAAM;UACH,IAAI,OAAOJ,IAAI,CAAC5F,IAAI,CAAC6F,MAAM,CAACG,SAAS,GAAG,CAAC,CAAC,KAAK,QAAQ,EAAE;YACrDJ,IAAI,CAAC5F,IAAI,CAACgF,MAAM,CAACa,MAAM,CAACG,SAAS,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;UACjD;QACJ;QAEAJ,IAAI,CAAC5F,IAAI,CAACgF,MAAM,CAACa,MAAM,CAACG,SAAS,EAAE,CAAC,CAAC;MACzC;IACJ;IAEA,SAASY,wBAAwBA,CAACf,MAAM,EAAE;MACtC,IAAMM,IAAI,GAAGxG,iBAAiB,CAACE,QAAQ,CAACmC,KAAK,EAAE6D,MAAM,CAACE,MAAM,CAAC,CAAC/F,IAAI,CAAC6F,MAAM,CAACG,SAAS,CAAC;MACpFG,IAAI,CAACA,IAAI,CAACK,SAAS,CAAC,UAACnC,EAAE;QAAA,OAAKA,EAAE,CAACvE,EAAE,IAAI+F,MAAM,CAACI,MAAM;MAAA,EAAC,CAAC,CAACQ,KAAK,GAAG,KAAK;IACtE;;IAEA;;IAEA,SAAStB,SAASA,CAAC0B,KAAK,EAAEC,EAAE,EAAEC,EAAE,EAAE;MAC9B,IAAM1F,SAAS,GAAGyF,EAAE,CAACrD,qBAAqB,EAAE;MAC5C,IAAMnC,UAAU,GAAGyF,EAAE,CAACtD,qBAAqB,EAAE;MAE7C,IAAMuD,gBAAgB,GAAG3F,SAAS,CAACqC,IAAI,GAAGrC,SAAS,CAAC4F,KAAK,GAAG,CAAC;QACzDC,gBAAgB,GAAG7F,SAAS,CAACsC,GAAG,GAAGtC,SAAS,CAAC8F,MAAM,GAAG,CAAC;QACvDC,iBAAiB,GAAG9F,UAAU,CAACoC,IAAI,GAAGpC,UAAU,CAAC2F,KAAK,GAAG,CAAC;QAC1DI,iBAAiB,GAAG/F,UAAU,CAACqC,GAAG,GAAGrC,UAAU,CAAC6F,MAAM,GAAG,CAAC;MAE9D,IAAIG,UAAU,GAAG;QAAEpH,CAAC,EAAE,CAAC;QAAEG,CAAC,EAAE;MAAE,CAAC;MAC/B,IAAIkH,QAAQ,GAAG;QAAErH,CAAC,EAAE,CAAC;QAAEG,CAAC,EAAE;MAAE,CAAC;MAE7B,IAAImH,gBAAgB,GAAG,CAAC;MACxB,IAAIC,gBAAgB,GAAG,CAAC;MACxB,IAAIC,iBAAiB,GAAG,CAAC;MACzB,IAAIC,iBAAiB,GAAG,CAAC;MAEzB,IAAIC,IAAI,CAACC,GAAG,CAACb,gBAAgB,GAAGI,iBAAiB,CAAC,GAAGQ,IAAI,CAACC,GAAG,CAACX,gBAAgB,GAAGG,iBAAiB,CAAC,EAAE;QACjGG,gBAAgB,GAAGnG,SAAS,CAAC4F,KAAK,GAAG,CAAC;QACtCQ,gBAAgB,GAAGpG,SAAS,CAAC8F,MAAM,GAAG,CAAC;QACvCO,iBAAiB,GAAGpG,UAAU,CAAC2F,KAAK,GAAG,CAAC;QACxCU,iBAAiB,GAAGrG,UAAU,CAAC6F,MAAM,GAAG,CAAC;QAEzC,IAAIS,IAAI,CAACC,GAAG,CAACX,gBAAgB,GAAGG,iBAAiB,CAAC,GAAG,GAAG,EAAE;UACtDI,gBAAgB,GAAG,CAAC;UACpBE,iBAAiB,GAAG,CAAC;QACzB;MACJ,CAAC,MAAM;QACHH,gBAAgB,GAAGnG,SAAS,CAAC4F,KAAK,GAAG,CAAC;QACtCQ,gBAAgB,GAAGpG,SAAS,CAAC8F,MAAM,GAAG,CAAC;QACvCO,iBAAiB,GAAGpG,UAAU,CAAC2F,KAAK,GAAG,CAAC;QACxCU,iBAAiB,GAAGrG,UAAU,CAAC6F,MAAM,GAAG,CAAC;MAC7C;MAEA,IAAIH,gBAAgB,GAAGI,iBAAiB,EAAE;QACtC;QACAE,UAAU,CAACpH,CAAC,GAAG8G,gBAAgB,GAAGQ,gBAAgB;QAClDD,QAAQ,CAACrH,CAAC,GAAGkH,iBAAiB,GAAGM,iBAAiB;MACtD,CAAC,MAAM;QACH;QACAJ,UAAU,CAACpH,CAAC,GAAG8G,gBAAgB,GAAGQ,gBAAgB;QAClDD,QAAQ,CAACrH,CAAC,GAAGkH,iBAAiB,GAAGM,iBAAiB;MACtD;MAEA,IAAIR,gBAAgB,GAAGG,iBAAiB,EAAE;QACtC;QACAC,UAAU,CAACjH,CAAC,GAAG6G,gBAAgB,GAAGO,gBAAgB;QAClDF,QAAQ,CAAClH,CAAC,GAAGgH,iBAAiB,GAAGM,iBAAiB;MACtD,CAAC,MAAM;QACH;QACAL,UAAU,CAACjH,CAAC,GAAG6G,gBAAgB,GAAGO,gBAAgB;QAClDF,QAAQ,CAAClH,CAAC,GAAGgH,iBAAiB,GAAGM,iBAAiB;MACtD;MAEA,IAAMG,QAAQ,GAAGxF,QAAQ,CAACC,aAAa,sBAAAE,MAAA,CAAsBoE,KAAK,CAAC/G,EAAE,QAAK;MAC1E,IAAI,CAACgI,QAAQ,EAAE;QACXxF,QAAQ,CAAC2C,cAAc,CAAC,MAAM,CAAC,CAACC,SAAS,kCAAAzC,MAAA,CACtBoE,KAAK,CAAC/G,EAAE,wVAAA2C,MAAA,CAMY6E,UAAU,CAACpH,CAAC,cAAAuC,MAAA,CAAS6E,UAAU,CAACjH,CAAC,cAAAoC,MAAA,CAAS8E,QAAQ,CAACrH,CAAC,cAAAuC,MAAA,CAAS8E,QAAQ,CAAClH,CAAC,wFAE7G;MACL,CAAC,MAAM;QACHyH,QAAQ,CAACvF,aAAa,CAAC,aAAa,CAAC,CAACwF,YAAY,CAAC,IAAI,EAAET,UAAU,CAACpH,CAAC,CAAC;QACtE4H,QAAQ,CAACvF,aAAa,CAAC,aAAa,CAAC,CAACwF,YAAY,CAAC,IAAI,EAAET,UAAU,CAACjH,CAAC,CAAC;QACtEyH,QAAQ,CAACvF,aAAa,CAAC,aAAa,CAAC,CAACwF,YAAY,CAAC,IAAI,EAAER,QAAQ,CAACrH,CAAC,CAAC;QACpE4H,QAAQ,CAACvF,aAAa,CAAC,aAAa,CAAC,CAACwF,YAAY,CAAC,IAAI,EAAER,QAAQ,CAAClH,CAAC,CAAC;MACxE;IACJ;IAEA,SAASqC,YAAYA,CAACxB,UAAU,EAAER,MAAM,EAAE;MACtC,IAAIS,SAAS,CAACa,KAAK,KAAK,IAAI,EAAE;QAC1BmD,SAAS,CAACzE,MAAM,CAACsH,EAAE,CAAC,CAAC,CAAC,CAAC,EAAEtI,gBAAgB,CAACgB,MAAM,CAACsH,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC3G,SAAS,CAAC,EAAEX,MAAM,CAACsH,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC1G,UAAU,CAAC;QAC7F;MACJ;MAEA,IAAMiE,QAAQ,GAAG5F,iBAAiB,CAACE,QAAQ,CAACmC,KAAK,EAAEd,UAAU,CAACgD,YAAY,CAAC,SAAS,CAAC,CAAC;MACtFxD,MAAM,CAAC0D,OAAO,CAAC,UAACC,EAAE,EAAK;QACnB,IAAIkB,QAAQ,CAACzF,EAAE,IAAIuE,EAAE,CAAChD,SAAS,IAAIkE,QAAQ,CAACzF,EAAE,IAAIuE,EAAE,CAAC/C,UAAU,EAAE;UAC7D6D,SAAS,CAACd,EAAE,EAAE3E,gBAAgB,CAAC2E,EAAE,CAAChD,SAAS,CAAC,EAAE3B,gBAAgB,CAAC2E,EAAE,CAAC/C,UAAU,CAAC,CAAC;QAClF;MACJ,CAAC,CAAC;IACN;IAEA,SAAS2G,eAAeA,CAACnG,KAAK,EAAE;MAC5BX,SAAS,CAACa,KAAK,GAAG,IAAI;MACtB,IAAMkG,mBAAmB,GAAG5F,QAAQ,CAAC6F,aAAa,CAAC,KAAK,CAAC;MACzDD,mBAAmB,CAACE,SAAS,GAAG,qBAAqB;MACrD9F,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC,CAAC8F,MAAM,CAACH,mBAAmB,CAAC;MAE3D9G,cAAc,CAACY,KAAK,CAACX,SAAS,GAAGS,KAAK,CAACyB,MAAM,CAACC,OAAO,CAAC,aAAa,CAAC;MACpEpC,cAAc,CAACY,KAAK,CAACV,UAAU,GAAG4G,mBAAmB;MAErDxH,MAAM,CAACsB,KAAK,CAACuC,IAAI,CAAC;QACdzE,EAAE,EAAE+E,MAAM,CAACC,UAAU,EAAE;QACvBzD,SAAS,EAAES,KAAK,CAACyB,MAAM,CAACC,OAAO,CAAC,aAAa,CAAC,CAACU,YAAY,CAAC,SAAS,CAAC;QACtE5C,UAAU,EAAE4G;MAChB,CAAC,CAAC;MAEF/C,SAAS,CAACzE,MAAM,CAACsB,KAAK,CAACgG,EAAE,CAAC,CAAC,CAAC,CAAC,EAAEtI,gBAAgB,CAACgB,MAAM,CAACsB,KAAK,CAACgG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC3G,SAAS,CAAC,EAAEX,MAAM,CAACsB,KAAK,CAACgG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC1G,UAAU,CAAC;MAE/G3B,iBAAiB,CAACE,QAAQ,CAACmC,KAAK,EAAEF,KAAK,CAACyB,MAAM,CAACC,OAAO,CAAC,aAAa,CAAC,CAACU,YAAY,CAAC,SAAS,CAAC,CAAC,CAAC1D,UAAU,GAAG,KAAK;IACrH;IAEA,SAAS8H,WAAWA,CAACxG,KAAK,EAAE;MACxB,IAAI,CAACX,SAAS,CAACa,KAAK,EAAE;MAEtB,IAAIF,KAAK,CAACyB,MAAM,CAACC,OAAO,CAAC,aAAa,CAAC,EAAE;QACrC,IAAMoC,IAAI,GAAG9D,KAAK,CAACyB,MAAM,CAACC,OAAO,CAAC,aAAa,CAAC;QAChD,IAAIoC,IAAI,CAAC1B,YAAY,CAAC,SAAS,CAAC,KAAKxD,MAAM,CAACsB,KAAK,CAACgG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC3G,SAAS,EAAE;QAEpEX,MAAM,CAACsB,KAAK,CAACgG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC1G,UAAU,GAAGsE,IAAI,CAAC1B,YAAY,CAAC,SAAS,CAAC;QAE7D/C,SAAS,CAACa,KAAK,GAAG,KAAK;QACvBZ,cAAc,CAACY,KAAK,CAACX,SAAS,GAAG,IAAI;QACrCD,cAAc,CAACY,KAAK,CAACV,UAAU,GAAG,IAAI;QAEtCgB,QAAQ,CAACC,aAAa,CAAC,sBAAsB,CAAC,CAACyB,MAAM,EAAE;MAC3D;MAEAtD,MAAM,CAACsB,KAAK,CAACoC,OAAO,CAAC,UAACC,EAAE,EAAK;QACzBc,SAAS,CAACd,EAAE,EAAE3E,gBAAgB,CAAC2E,EAAE,CAAChD,SAAS,CAAC,EAAE3B,gBAAgB,CAAC2E,EAAE,CAAC/C,UAAU,CAAC,CAAC;MAClF,CAAC,CAAC;IACN;;IAEA;IACA,SAASiH,mBAAmBA,CAACzG,KAAK,EAAE;MAChC,IAAI0G,QAAQ,GAAG,MAAM;MACrB,IAAM5C,IAAI,GAAG9D,KAAK,CAACyB,MAAM,CAACC,OAAO,CAAC,aAAa,CAAC;MAChD,IAAMiF,QAAQ,GAAG9I,iBAAiB,CAACE,QAAQ,CAACmC,KAAK,EAAE4D,IAAI,CAAC1B,YAAY,CAAC,SAAS,CAAC,CAAC;MAChFuE,QAAQ,CAACjI,UAAU,GAAG,CAACiI,QAAQ,CAACjI,UAAU;MAE1C,IAAIL,MAAM,CAACC,UAAU,GAAGwF,IAAI,CAACnC,qBAAqB,EAAE,CAACiF,KAAK,GAAG,GAAG,EAAE;QAC9DF,QAAQ,IAAI,OAAO;MACvB,CAAC,MAAM;QACHA,QAAQ,IAAI,QAAQ;MACxB;MACA,IAAI5C,IAAI,CAACnC,qBAAqB,EAAE,CAACE,GAAG,GAAG,GAAG,EAAE;QACxC6E,QAAQ,IAAI,SAAS;MACzB,CAAC,MAAM;QACHA,QAAQ,IAAI,MAAM;MACtB;MAEA5C,IAAI,CAACmC,YAAY,CAAC,WAAW,EAAES,QAAQ,CAAC;MAExC,IAAMG,QAAQ,GAAG,SAAXA,QAAQA,CAAI7G,KAAK,EAAK;QACxB,IAAI,CAACA,KAAK,CAACyB,MAAM,CAACC,OAAO,CAAC,aAAa,CAAC,EAAE;UACtC,IAAI1B,KAAK,CAACyB,MAAM,CAACC,OAAO,CAAC,YAAY,CAAC,EAAE;YACpCiF,QAAQ,CAACjI,UAAU,GAAG,KAAK;YAC3B8B,QAAQ,CAACsG,mBAAmB,CAAC,OAAO,EAAED,QAAQ,EAAE,KAAK,CAAC;UAC1D;QACJ,CAAC,MAAM;UACH,IAAI7G,KAAK,CAACyB,MAAM,CAACC,OAAO,CAAC,aAAa,CAAC,CAACU,YAAY,CAAC,SAAS,CAAC,KAAK0B,IAAI,CAAC1B,YAAY,CAAC,SAAS,CAAC,EAAE;YAC9FuE,QAAQ,CAACjI,UAAU,GAAG,KAAK;YAC3B8B,QAAQ,CAACsG,mBAAmB,CAAC,OAAO,EAAED,QAAQ,EAAE,KAAK,CAAC;UAC1D;QACJ;MACJ,CAAC;MAEDrG,QAAQ,CAACuG,gBAAgB,CAAC,OAAO,EAAEF,QAAQ,EAAE,KAAK,CAAC;IACvD;;IAEA;;IAEA,SAASG,gBAAgBA,CAAChJ,EAAE,EAAE;MAC1BJ,gBAAgB,CAACI,EAAE,CAAC,CAAC8D,SAAS,CAACC,GAAG,CAAC,OAAO,CAAC;IAC/C;IAEA,SAASkF,eAAeA,CAAA,EAAG;MACvBzG,QAAQ,CAAC0G,gBAAgB,CAAC,aAAa,CAAC,CAAC5E,OAAO,CAAC,UAACC,EAAE;QAAA,OAAKA,EAAE,CAACT,SAAS,CAACI,MAAM,CAAC,OAAO,CAAC;MAAA,EAAC;IAC1F;;IAEA;;IAEA,SAASiF,cAAcA,CAAA,EAAG;MACtB3G,QAAQ,CAACuG,gBAAgB,CAAC,SAAS,EAAE,UAAC/G,KAAK,EAAK;QAC5C,IAAGA,KAAK,CAACoH,GAAG,KAAK,QAAQ,EAAG;UACxB,IAAG3H,WAAW,CAACS,KAAK,EAAE;YAClBtB,MAAM,CAACsB,KAAK,CAACoC,OAAO,CAAC,UAACC,EAAE,EAAEG,KAAK,EAAK;cAChC,IAAGH,EAAE,CAACvE,EAAE,KAAKyB,WAAW,CAACS,KAAK,CAACkC,YAAY,CAAC,UAAU,CAAC,EAAE;gBACrD9B,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;gBAClB3B,MAAM,CAACsB,KAAK,CAACgD,MAAM,CAACR,KAAK,EAAE,CAAC,CAAC;cACjC;cAEAlC,QAAQ,CAAC2C,cAAc,CAAC,MAAM,CAAC,CAACC,SAAS,GAAG,EAAE;cAC9CxE,MAAM,CAACsB,KAAK,CAACoC,OAAO,CAAC,UAACC,EAAE,EAAK;gBACzBc,SAAS,CAACd,EAAE,EAAE3E,gBAAgB,CAAC2E,EAAE,CAAChD,SAAS,CAAC,EAAE3B,gBAAgB,CAAC2E,EAAE,CAAC/C,UAAU,CAAC,CAAC;cAClF,CAAC,CAAC;cAEF,IAAG,CAACZ,MAAM,CAACsB,KAAK,CAAC2E,MAAM,EAAE;gBACrBrE,QAAQ,CAAC2C,cAAc,CAAC,MAAM,CAAC,CAACC,SAAS,GAAG,EAAE;cAClD;YACJ,CAAC,CAAC;UACN;QACJ;MACJ,CAAC,CAAC;IACN;IAEA1F,SAAS,CAAC,YAAM;MACZ,IAAI2J,IAAI,GAAG7G,QAAQ,CAAC2C,cAAc,CAAC,MAAM,CAAC;MAE1CkE,IAAI,CAACpB,YAAY,CAAC,OAAO,EAAE5H,MAAM,CAACC,UAAU,CAAC;MAC7C+I,IAAI,CAACpB,YAAY,CAAC,QAAQ,EAAE5H,MAAM,CAACG,WAAW,CAAC;MAE/C6I,IAAI,CAACN,gBAAgB,CAAC,OAAO,EAAE,UAAC/G,KAAK,EAAK;QACtC,IAAGA,KAAK,CAACyB,MAAM,CAACC,OAAO,CAAC,cAAc,CAAC,KAAK,IAAI,EAAE;UAC9CjC,WAAW,CAACS,KAAK,GAAGF,KAAK,CAACyB,MAAM,CAACC,OAAO,CAAC,cAAc,CAAC;UACxD1B,KAAK,CAACyB,MAAM,CAACC,OAAO,CAAC,cAAc,CAAC,CAACI,SAAS,CAACC,GAAG,CAAC,SAAS,CAAC;QACjE,CAAC,MAAI;UACDtC,WAAW,CAACS,KAAK,GAAG,IAAI;QAC5B;MACJ,CAAC,CAAC;MAEFtB,MAAM,CAACsB,KAAK,CAACoC,OAAO,CAAC,UAACC,EAAE,EAAK;QACzBc,SAAS,CAACd,EAAE,EAAE3E,gBAAgB,CAAC2E,EAAE,CAAChD,SAAS,CAAC,EAAE3B,gBAAgB,CAAC2E,EAAE,CAAC/C,UAAU,CAAC,CAAC;MAClF,CAAC,CAAC;MAEFnB,MAAM,CAAC0I,gBAAgB,CAAC,QAAQ,EAAE,YAAM;QACpCnI,MAAM,CAACsB,KAAK,CAACoC,OAAO,CAAC,UAACC,EAAE,EAAK;UACzBc,SAAS,CAACd,EAAE,EAAE3E,gBAAgB,CAAC2E,EAAE,CAAChD,SAAS,CAAC,EAAE3B,gBAAgB,CAAC2E,EAAE,CAAC/C,UAAU,CAAC,CAAC;QAClF,CAAC,CAAC;MACN,CAAC,CAAC;MAEF2H,cAAc,EAAE;IACpB,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}