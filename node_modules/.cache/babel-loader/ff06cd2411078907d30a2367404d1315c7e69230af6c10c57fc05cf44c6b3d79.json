{"ast":null,"code":"import \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport { ref, onMounted } from \"vue\";\nimport { getItemInDocById } from \"@/hooks/getItem\";\nimport { fixEvent } from \"./hooks/fixEvent\";\nimport { useTodoItemList } from \"./hooks/items/todoItemList\";\nimport { useDragObject } from \"./hooks/dragObject\";\nimport { useModalSuccess } from \"./hooks/modal/modalSuccess\";\nimport { useArrows } from \"./hooks/items/arrows\";\nexport default {\n  __name: 'App',\n  setup: function setup(__props, _ref) {\n    var expose = _ref.expose;\n    expose();\n    var todoList = useTodoItemList([{\n      id: Math.random() * 1000,\n      title: \"Title\",\n      text: [\"Пустая строка\", [{\n        id: Math.random() * 1000,\n        text: \"asbsds\",\n        status: false\n      }]],\n      position: {\n        x: window.innerWidth / 2 - 200,\n        y: window.innerHeight / 2 - 200,\n        z: 100\n      },\n      menuToggle: false,\n      lock: false\n    }, {\n      id: Math.random() * 1000,\n      title: \"Title\",\n      text: [\"Пустая строка\", [{\n        id: Math.random() * 1000,\n        text: \"asbsds\",\n        status: false\n      }]],\n      position: {\n        x: window.innerWidth / 2 - 200,\n        y: window.innerHeight / 2 - 200,\n        z: 100\n      },\n      menuToggle: false,\n      lock: false\n    }]);\n    var arrows = useArrows([]);\n    var successItem = useModalSuccess({});\n    var dragObject = useDragObject(null);\n    // let arrowMode = ref(false);\n    // let arrowModeItems = ref({\n    //     firstItem: null,\n    //     secondItem: null,\n    // });\n    // let arrowObject = ref(null);\n\n    // <!-- ? item movement -->\n\n    var mouseX = ref(0);\n    var mouseY = ref(0);\n    var offsetItemX = dragObject.offsetItemX;\n    var offsetItemY = dragObject.offsetItemY;\n    function mouseMove(event) {\n      event = fixEvent(event);\n      mouseX.value = event.pageX;\n      mouseY.value = event.pageY;\n      if (dragObject.val.value) {\n        var item = todoList.list.find(function (el) {\n          return el.val.id == dragObject.val.value.getAttribute(\"todo-id\");\n        });\n        if (item.val.lock) return;\n        var xPos = mouseX.value - offsetItemX.value;\n        var yPos = mouseY.value - offsetItemY.value;\n        if (mouseY.value + dragObject.val.value.getBoundingClientRect().height / 3 < window.innerHeight && mouseY.value > 20) {\n          item.setItemPos(xPos, yPos);\n        } else {\n          item.setItemPos(xPos, null);\n        }\n      }\n\n      // if (arrowMode.value === true) {\n      //     document.querySelector(\".arrowModeSecondItem\").style = `position: absolute; width: 2px; height: 2px;top: ${\n      //         mouseY.value - 5\n      //     }px; left: ${mouseX.value - 5}px; pointer-events: none;`;\n      //     redrawArrows(null, arrows.value);\n      // }\n    }\n\n    function modalAction(content) {\n      if (content.func.type == \"item:remove\") {\n        todoList.removeItem(content.func.action);\n      }\n      successItem.modalJustClose();\n    }\n\n    // <!-- ? Items list function -->\n\n    function hoverFocusedItem(id) {\n      getItemInDocById(id).classList.add(\"hover\");\n    }\n    function blurFocusedItem() {\n      document.querySelectorAll(\".todo__item\").forEach(function (el) {\n        return el.classList.remove(\"hover\");\n      });\n    }\n\n    // <!-- ? Dop functions -->\n\n    // function setKeyListener() {\n    //     document.addEventListener(\"keydown\", (event) => {\n    //         if(event.key === \"Delete\" ) {\n    //             if(arrowObject.value) {\n    //                 arrows.value.forEach((el, index) => {\n    //                     if(el.id === arrowObject.value.getAttribute(\"arrow-id\")) {\n    //                         console.log(\"123\")\n    //                         arrows.value.splice(index, 1);\n    //                     }\n\n    //                     document.getElementById(\"area\").innerHTML = '';\n    //                     arrows.value.forEach((el) => {\n    //                         setArrows(el, getItemInDocById(el.firstItem), getItemInDocById(el.secondItem));\n    //                     });\n\n    //                     if(!arrows.value.length) {\n    //                         document.getElementById(\"area\").innerHTML = '';\n    //                     }\n    //                 })\n    //             }\n    //         }\n    //     })\n    // }\n\n    // onMounted(() => {\n    //     let area = document.getElementById(\"area\");\n\n    //     area.setAttribute(\"width\", window.innerWidth);\n    //     area.setAttribute(\"height\", window.innerHeight);\n\n    //     area.addEventListener(\"click\", (event) => {\n    //         if(event.target.closest(\".arrow__line\") !== null) {\n    //             arrowObject.value = event.target.closest(\".arrow__line\");\n    //             event.target.closest(\".arrow__line\").classList.add(\"focused\");\n    //         }else{\n    //             arrowObject.value = null;\n    //         }\n    //     })\n\n    //     arrows.value.forEach((el) => {\n    //         setArrows(el, getItemInDocById(el.firstItem), getItemInDocById(el.secondItem));\n    //     });\n\n    //     window.addEventListener(\"resize\", () => {\n    //         arrows.value.forEach((el) => {\n    //             setArrows(el, getItemInDocById(el.firstItem), getItemInDocById(el.secondItem));\n    //         });\n    //     });\n\n    //     setKeyListener();\n    // });\n\n    onMounted(function () {\n      window.oncontextmenu = function () {\n        return false;\n      };\n    });\n    var __returned__ = {\n      todoList: todoList,\n      arrows: arrows,\n      successItem: successItem,\n      get dragObject() {\n        return dragObject;\n      },\n      set dragObject(v) {\n        dragObject = v;\n      },\n      mouseX: mouseX,\n      mouseY: mouseY,\n      offsetItemX: offsetItemX,\n      offsetItemY: offsetItemY,\n      mouseMove: mouseMove,\n      modalAction: modalAction,\n      hoverFocusedItem: hoverFocusedItem,\n      blurFocusedItem: blurFocusedItem,\n      ref: ref,\n      onMounted: onMounted,\n      get getItemInDocById() {\n        return getItemInDocById;\n      },\n      get fixEvent() {\n        return fixEvent;\n      },\n      get useTodoItemList() {\n        return useTodoItemList;\n      },\n      get useDragObject() {\n        return useDragObject;\n      },\n      get useModalSuccess() {\n        return useModalSuccess;\n      },\n      get useArrows() {\n        return useArrows;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","getItemInDocById","fixEvent","useTodoItemList","useDragObject","useModalSuccess","useArrows","todoList","id","Math","random","title","text","status","position","x","window","innerWidth","y","innerHeight","z","menuToggle","lock","arrows","successItem","dragObject","mouseX","mouseY","offsetItemX","offsetItemY","mouseMove","event","value","pageX","pageY","val","item","list","find","el","getAttribute","xPos","yPos","getBoundingClientRect","height","setItemPos","modalAction","content","func","type","removeItem","action","modalJustClose","hoverFocusedItem","classList","add","blurFocusedItem","document","querySelectorAll","forEach","remove","oncontextmenu"],"sources":["C:/Users/Setis/Documents/alex/vue-todo-app/src/App.vue"],"sourcesContent":["<template>\r\n    <main\r\n        class=\"main\"\r\n        @mousemove=\"mouseMove\"\r\n        @mouseup=\"dragObject.removeDragObject\"\r\n    >\r\n        <div class=\"wrapper\">\r\n            <app-item\r\n                v-for=\"todo in todoList.list\"\r\n                :key=\"todo.val.id\"\r\n                :todo=\"todo\"\r\n                @mouseup=\"todoList.setToTopItem\"\r\n                @item:setDragObject=\"\r\n                    () => {\r\n                        dragObject.setDragObject();\r\n                        todo.val.menuToggle = false;\r\n                    }\r\n                \"\r\n                @modal:removeMessage=\"\r\n                    (value) => {\r\n                        successItem.modalShow(value);\r\n                    }\r\n                \"\r\n                @arrow:add=\"\r\n                    () => {\r\n                        arrows.setArrow(todo.val.id);\r\n                        todo.val.menuToggle = false;\r\n                    }\r\n                \"\r\n            ></app-item>\r\n\r\n            <app-arrows :arrowsList=\"arrows\"></app-arrows>\r\n\r\n            <div\r\n                v-if=\"todoList.length < 1\"\r\n                class=\"items__none\"\r\n            >\r\n                <h3>Привет)) Как у тебя дела?</h3>\r\n                <app-button\r\n                    type=\"button\"\r\n                    class=\"items__none_button\"\r\n                    @click=\"todoList.addNewItem\"\r\n                >\r\n                    <span class=\"i-plus\"></span>\r\n                    <span>Нажми на меня</span>\r\n                </app-button>\r\n            </div>\r\n        </div>\r\n\r\n        <app-items-list\r\n            v-if=\"todoList.list.length > 0\"\r\n            :items=\"todoList.list\"\r\n            @item:hover=\"hoverFocusedItem\"\r\n            @item:blur=\"blurFocusedItem\"\r\n            @item:add=\"todoList.addNewItem\"\r\n        />\r\n        <app-modal-window-success\r\n            :content=\"successItem\"\r\n            @modal:close=\"successItem.modalJustClose\"\r\n            @modal:success=\"modalAction\"\r\n        />\r\n\r\n        <div class=\"textAreaHeightResize\"></div>\r\n    </main>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport { getItemInDocById } from \"@/hooks/getItem\";\r\nimport { fixEvent } from \"./hooks/fixEvent\";\r\nimport { useTodoItemList } from \"./hooks/items/todoItemList\";\r\nimport { useDragObject } from \"./hooks/dragObject\";\r\nimport { useModalSuccess } from \"./hooks/modal/modalSuccess\";\r\nimport { useArrows } from \"./hooks/items/arrows\";\r\n\r\nconst todoList = useTodoItemList([\r\n    {\r\n        id: Math.random() * 1000,\r\n        title: \"Title\",\r\n        text: [\r\n            \"Пустая строка\",\r\n            [\r\n                {\r\n                    id: Math.random() * 1000,\r\n                    text: \"asbsds\",\r\n                    status: false,\r\n                },\r\n            ],\r\n        ],\r\n        position: {\r\n            x: window.innerWidth / 2 - 200,\r\n            y: window.innerHeight / 2 - 200,\r\n            z: 100,\r\n        },\r\n        menuToggle: false,\r\n        lock: false,\r\n    },\r\n    {\r\n        id: Math.random() * 1000,\r\n        title: \"Title\",\r\n        text: [\r\n            \"Пустая строка\",\r\n            [\r\n                {\r\n                    id: Math.random() * 1000,\r\n                    text: \"asbsds\",\r\n                    status: false,\r\n                },\r\n            ],\r\n        ],\r\n        position: {\r\n            x: window.innerWidth / 2 - 200,\r\n            y: window.innerHeight / 2 - 200,\r\n            z: 100,\r\n        },\r\n        menuToggle: false,\r\n        lock: false,\r\n    },\r\n]);\r\nconst arrows = useArrows([]);\r\n\r\nconst successItem = useModalSuccess({});\r\n\r\nlet dragObject = useDragObject(null);\r\n// let arrowMode = ref(false);\r\n// let arrowModeItems = ref({\r\n//     firstItem: null,\r\n//     secondItem: null,\r\n// });\r\n// let arrowObject = ref(null);\r\n\r\n// <!-- ? item movement -->\r\n\r\nconst mouseX = ref(0);\r\nconst mouseY = ref(0);\r\n\r\nconst offsetItemX = dragObject.offsetItemX;\r\nconst offsetItemY = dragObject.offsetItemY;\r\n\r\nfunction mouseMove(event) {\r\n    event = fixEvent(event);\r\n    mouseX.value = event.pageX;\r\n    mouseY.value = event.pageY;\r\n\r\n    if (dragObject.val.value) {\r\n        const item = todoList.list.find((el) => el.val.id == dragObject.val.value.getAttribute(\"todo-id\"));\r\n        if (item.val.lock) return;\r\n\r\n        let xPos = mouseX.value - offsetItemX.value;\r\n        let yPos = mouseY.value - offsetItemY.value;\r\n\r\n        if (\r\n            mouseY.value + dragObject.val.value.getBoundingClientRect().height / 3 < window.innerHeight &&\r\n            mouseY.value > 20\r\n        ) {\r\n            item.setItemPos(xPos, yPos);\r\n        } else {\r\n            item.setItemPos(xPos, null);\r\n        }\r\n    }\r\n\r\n    // if (arrowMode.value === true) {\r\n    //     document.querySelector(\".arrowModeSecondItem\").style = `position: absolute; width: 2px; height: 2px;top: ${\r\n    //         mouseY.value - 5\r\n    //     }px; left: ${mouseX.value - 5}px; pointer-events: none;`;\r\n    //     redrawArrows(null, arrows.value);\r\n    // }\r\n}\r\n\r\nfunction modalAction(content) {\r\n    if (content.func.type == \"item:remove\") {\r\n        todoList.removeItem(content.func.action);\r\n    }\r\n    successItem.modalJustClose();\r\n}\r\n\r\n// <!-- ? Items list function -->\r\n\r\nfunction hoverFocusedItem(id) {\r\n    getItemInDocById(id).classList.add(\"hover\");\r\n}\r\n\r\nfunction blurFocusedItem() {\r\n    document.querySelectorAll(\".todo__item\").forEach((el) => el.classList.remove(\"hover\"));\r\n}\r\n\r\n// <!-- ? Dop functions -->\r\n\r\n// function setKeyListener() {\r\n//     document.addEventListener(\"keydown\", (event) => {\r\n//         if(event.key === \"Delete\" ) {\r\n//             if(arrowObject.value) {\r\n//                 arrows.value.forEach((el, index) => {\r\n//                     if(el.id === arrowObject.value.getAttribute(\"arrow-id\")) {\r\n//                         console.log(\"123\")\r\n//                         arrows.value.splice(index, 1);\r\n//                     }\r\n\r\n//                     document.getElementById(\"area\").innerHTML = '';\r\n//                     arrows.value.forEach((el) => {\r\n//                         setArrows(el, getItemInDocById(el.firstItem), getItemInDocById(el.secondItem));\r\n//                     });\r\n\r\n//                     if(!arrows.value.length) {\r\n//                         document.getElementById(\"area\").innerHTML = '';\r\n//                     }\r\n//                 })\r\n//             }\r\n//         }\r\n//     })\r\n// }\r\n\r\n// onMounted(() => {\r\n//     let area = document.getElementById(\"area\");\r\n\r\n//     area.setAttribute(\"width\", window.innerWidth);\r\n//     area.setAttribute(\"height\", window.innerHeight);\r\n\r\n//     area.addEventListener(\"click\", (event) => {\r\n//         if(event.target.closest(\".arrow__line\") !== null) {\r\n//             arrowObject.value = event.target.closest(\".arrow__line\");\r\n//             event.target.closest(\".arrow__line\").classList.add(\"focused\");\r\n//         }else{\r\n//             arrowObject.value = null;\r\n//         }\r\n//     })\r\n\r\n//     arrows.value.forEach((el) => {\r\n//         setArrows(el, getItemInDocById(el.firstItem), getItemInDocById(el.secondItem));\r\n//     });\r\n\r\n//     window.addEventListener(\"resize\", () => {\r\n//         arrows.value.forEach((el) => {\r\n//             setArrows(el, getItemInDocById(el.firstItem), getItemInDocById(el.secondItem));\r\n//         });\r\n//     });\r\n\r\n//     setKeyListener();\r\n// });\r\n\r\nonMounted(() => {\r\n    window.oncontextmenu = function () {\r\n        return false;\r\n    };\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@use \"@/assets/scss/theme/theme_main\";\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}