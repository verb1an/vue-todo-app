{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nvar __default__ = {\n  name: \"app-todo-list\"\n};\nexport default /*#__PURE__*/Object.assign(__default__, {\n  props: {\n    content: {\n      type: Array,\n      required: true\n    },\n    itemId: {\n      type: Number,\n      required: true\n    },\n    listCount: {\n      type: Number,\n      required: true\n    }\n  },\n  emits: [\"item:changeStatus\", \"item:addCheckItem\", \"todo:removeItem\", \"input:blur\"],\n  setup: function setup(__props, _ref) {\n    var expose = _ref.expose,\n      emit = _ref.emit;\n    expose();\n    var props = __props;\n    function setKeyListeneres(event) {\n      switch (event.keyCode) {\n        case 13:\n          if (event.target.selectionStart < event.target.value.length) return;\n          event.preventDefault();\n          emit(\"item:addCheckItem\", {\n            target: props.itemId,\n            listCount: props.listCount\n          });\n        case 8:\n          if (!event.target.value == \"\") return;\n          event.preventDefault();\n          if (targetItem.previousSibling.tagName) {\n            event.preventDefault();\n            targetItem.previousSibling.querySelector(\"textarea\").focus();\n          }\n          emit(\"list:removeCheckList\", {\n            target: props.itemId,\n            listCount: props.listCount\n          });\n      }\n    }\n    function addNewItem(event) {\n      if (event.keyCode === 13) {\n        if (event.target.selectionStart < event.target.value.length) return;\n        event.preventDefault();\n        emit(\"todo:addItem\", {\n          itemId: props.itemId,\n          listCount: props.listCount,\n          todoId: Number(event.target.closest(\".list__item\").getAttribute(\"text-todo-id\"))\n        });\n      } else if (event.keyCode === 8 && event.target.value == \"\") {\n        event.preventDefault();\n        // <!-- ? Set focus on previous element -->\n        var _targetItem = event.target.closest(\".list__item\");\n        if (_targetItem.previousSibling.tagName) {\n          event.preventDefault();\n          _targetItem.previousSibling.querySelector(\"textarea\").focus();\n        }\n        emit(\"todo:removeItem\", {\n          itemId: props.itemId,\n          listCount: props.listCount,\n          todoId: Number(_targetItem.getAttribute(\"text-todo-id\"))\n        });\n      }\n    }\n    function removeFocus(target) {\n      emit(\"input:blur\", {\n        itemId: props.itemId,\n        listCount: props.listCount,\n        todoId: Number(target.closest(\".list__item\").getAttribute(\"text-todo-id\"))\n      });\n    }\n    var __returned__ = {\n      props: props,\n      emit: emit,\n      setKeyListeneres: setKeyListeneres,\n      addNewItem: addNewItem,\n      removeFocus: removeFocus\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n});","map":{"version":3,"names":["__default__","name","setKeyListeneres","event","keyCode","target","selectionStart","value","length","preventDefault","emit","props","itemId","listCount","targetItem","previousSibling","tagName","querySelector","focus","addNewItem","todoId","Number","closest","getAttribute","removeFocus"],"sources":["C:/Users/Setis/Documents/alex/vue-todo-app/src/components/AppTodoList.vue"],"sourcesContent":["<template>\r\n    <div class=\"todo__items_list\">\r\n        <div\r\n            v-for=\"checkItem in content\"\r\n            :key=\"checkItem.id\"\r\n            :text-todo-id=\"checkItem.id\"\r\n            :data-status=\"checkItem.status\"\r\n            @keydown=\"setKeyListeneres\"\r\n            class=\"list__item\"\r\n        >\r\n            <span class=\"i-check\" @click=\"$emit('item:changeStatus', checkItem.id)\"></span>\r\n            <app-todo-text\r\n                v-model=\"checkItem.text\"\r\n                class=\"todo__input\"\r\n                :focus=\"checkItem.focus\"\r\n                :status=\"checkItem.status\"\r\n                @input:blur=\"removeFocus\"\r\n                style=\"cols: 18\"\r\n            />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"app-todo-list\",\r\n};\r\n</script>\r\n\r\n<script setup>\r\nimport { defineProps, defineEmits } from \"vue\";\r\n\r\nconst props = defineProps({\r\n    content: { type: Array, required: true },\r\n    itemId: { type: Number, required: true },\r\n    listCount: { type: Number, required: true },\r\n});\r\n\r\nconst emit = defineEmits([\"item:changeStatus\", \"item:addCheckItem\", \"todo:removeItem\", \"input:blur\"]);\r\n\r\nfunction setKeyListeneres(event) {\r\n    switch (event.keyCode) {\r\n        case 13 :\r\n            if (event.target.selectionStart < event.target.value.length) return;\r\n            event.preventDefault();\r\n            emit(\"item:addCheckItem\", {target: props.itemId, listCount: props.listCount})\r\n        case 8 :\r\n            if(!event.target.value == \"\") return;\r\n            event.preventDefault();\r\n            if (targetItem.previousSibling.tagName) {\r\n                event.preventDefault();\r\n                targetItem.previousSibling.querySelector(\"textarea\").focus();\r\n            }\r\n            emit(\"list:removeCheckList\", {target: props.itemId, listCount: props.listCount})\r\n    }\r\n}\r\n\r\nfunction addNewItem(event) {\r\n    if (event.keyCode === 13) {\r\n        if (event.target.selectionStart < event.target.value.length) return;\r\n\r\n        event.preventDefault();\r\n        emit(\"todo:addItem\", {\r\n            itemId: props.itemId,\r\n            listCount: props.listCount,\r\n            todoId: Number(event.target.closest(\".list__item\").getAttribute(\"text-todo-id\")),\r\n        });\r\n    } else if (event.keyCode === 8 && event.target.value == \"\") {\r\n        event.preventDefault();\r\n        // <!-- ? Set focus on previous element -->\r\n        const targetItem = event.target.closest(\".list__item\");\r\n\r\n        if (targetItem.previousSibling.tagName) {\r\n            event.preventDefault();\r\n            targetItem.previousSibling.querySelector(\"textarea\").focus();\r\n        }\r\n\r\n        emit(\"todo:removeItem\", {\r\n            itemId: props.itemId,\r\n            listCount: props.listCount,\r\n            todoId: Number(targetItem.getAttribute(\"text-todo-id\")),\r\n        });\r\n    }\r\n}\r\n\r\nfunction removeFocus(target) {\r\n    emit(\"input:blur\", {\r\n        itemId: props.itemId,\r\n        listCount: props.listCount,\r\n        todoId: Number(target.closest(\".list__item\").getAttribute(\"text-todo-id\")),\r\n    });\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@use \"@/assets/scss/vars\";\r\n.todo__items_list {\r\n    display: flex;\r\n    flex-direction: column;\r\n    .list__item {\r\n        cursor: pointer;\r\n        display: flex;\r\n        align-items: flex-start;\r\n        margin-bottom: 5px;\r\n\r\n        .todo__input {\r\n            position: relative;\r\n            &::after {\r\n                content: \"\";\r\n                position: absolute;\r\n                top: 50%;\r\n                left: 0;\r\n                transform: translate(0, -50%);\r\n\r\n                width: 0;\r\n                height: 1px;\r\n                background-color: vars.$color-g-white;\r\n                transition: width 0.12s ease-in-out;\r\n            }\r\n        }\r\n\r\n        span {\r\n            width: 20px;\r\n            height: 20px;\r\n            font-size: 18px;\r\n            border: 1px solid vars.$color-g-white;\r\n            color: transparent;\r\n            border-radius: 50%;\r\n            margin-right: 10px;\r\n\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            padding-top: 2px;\r\n            transition: background-color 0.12s ease-in-out;\r\n        }\r\n        &[data-status=\"true\"] {\r\n            span {\r\n                color: vars.$color-g-dark;\r\n                background-color: vars.$color-g-white;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n"],"mappings":";;AAwBA,IAAAA,WAAA,GAAe;EACXC,IAAI,EAAE;AACV,CAAC;;;;;;;;;;;;;;;;;;;;;;IAcD,SAASC,gBAAgBA,CAACC,KAAK,EAAE;MAC7B,QAAQA,KAAK,CAACC,OAAO;QACjB,KAAK,EAAE;UACH,IAAID,KAAK,CAACE,MAAM,CAACC,cAAc,GAAGH,KAAK,CAACE,MAAM,CAACE,KAAK,CAACC,MAAM,EAAE;UAC7DL,KAAK,CAACM,cAAc,EAAE;UACtBC,IAAI,CAAC,mBAAmB,EAAE;YAACL,MAAM,EAAEM,KAAK,CAACC,MAAM;YAAEC,SAAS,EAAEF,KAAK,CAACE;UAAS,CAAC,CAAC;QACjF,KAAK,CAAC;UACF,IAAG,CAACV,KAAK,CAACE,MAAM,CAACE,KAAK,IAAI,EAAE,EAAE;UAC9BJ,KAAK,CAACM,cAAc,EAAE;UACtB,IAAIK,UAAU,CAACC,eAAe,CAACC,OAAO,EAAE;YACpCb,KAAK,CAACM,cAAc,EAAE;YACtBK,UAAU,CAACC,eAAe,CAACE,aAAa,CAAC,UAAU,CAAC,CAACC,KAAK,EAAE;UAChE;UACAR,IAAI,CAAC,sBAAsB,EAAE;YAACL,MAAM,EAAEM,KAAK,CAACC,MAAM;YAAEC,SAAS,EAAEF,KAAK,CAACE;UAAS,CAAC,CAAC;MAAA;IAE5F;IAEA,SAASM,UAAUA,CAAChB,KAAK,EAAE;MACvB,IAAIA,KAAK,CAACC,OAAO,KAAK,EAAE,EAAE;QACtB,IAAID,KAAK,CAACE,MAAM,CAACC,cAAc,GAAGH,KAAK,CAACE,MAAM,CAACE,KAAK,CAACC,MAAM,EAAE;QAE7DL,KAAK,CAACM,cAAc,EAAE;QACtBC,IAAI,CAAC,cAAc,EAAE;UACjBE,MAAM,EAAED,KAAK,CAACC,MAAM;UACpBC,SAAS,EAAEF,KAAK,CAACE,SAAS;UAC1BO,MAAM,EAAEC,MAAM,CAAClB,KAAK,CAACE,MAAM,CAACiB,OAAO,CAAC,aAAa,CAAC,CAACC,YAAY,CAAC,cAAc,CAAC;QACnF,CAAC,CAAC;MACN,CAAC,MAAM,IAAIpB,KAAK,CAACC,OAAO,KAAK,CAAC,IAAID,KAAK,CAACE,MAAM,CAACE,KAAK,IAAI,EAAE,EAAE;QACxDJ,KAAK,CAACM,cAAc,EAAE;QACtB;QACA,IAAMK,WAAU,GAAGX,KAAK,CAACE,MAAM,CAACiB,OAAO,CAAC,aAAa,CAAC;QAEtD,IAAIR,WAAU,CAACC,eAAe,CAACC,OAAO,EAAE;UACpCb,KAAK,CAACM,cAAc,EAAE;UACtBK,WAAU,CAACC,eAAe,CAACE,aAAa,CAAC,UAAU,CAAC,CAACC,KAAK,EAAE;QAChE;QAEAR,IAAI,CAAC,iBAAiB,EAAE;UACpBE,MAAM,EAAED,KAAK,CAACC,MAAM;UACpBC,SAAS,EAAEF,KAAK,CAACE,SAAS;UAC1BO,MAAM,EAAEC,MAAM,CAACP,WAAU,CAACS,YAAY,CAAC,cAAc,CAAC;QAC1D,CAAC,CAAC;MACN;IACJ;IAEA,SAASC,WAAWA,CAACnB,MAAM,EAAE;MACzBK,IAAI,CAAC,YAAY,EAAE;QACfE,MAAM,EAAED,KAAK,CAACC,MAAM;QACpBC,SAAS,EAAEF,KAAK,CAACE,SAAS;QAC1BO,MAAM,EAAEC,MAAM,CAAChB,MAAM,CAACiB,OAAO,CAAC,aAAa,CAAC,CAACC,YAAY,CAAC,cAAc,CAAC;MAC7E,CAAC,CAAC;IACN"},"metadata":{},"sourceType":"module","externalDependencies":[]}