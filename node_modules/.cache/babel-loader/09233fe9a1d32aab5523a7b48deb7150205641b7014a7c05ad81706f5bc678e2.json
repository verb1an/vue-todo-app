{"ast":null,"code":"import \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport { reactive, ref } from \"vue\";\nimport { getItemInDocById } from \"../getItem\";\nexport function useArrows() {\n  var arrows = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var list = reactive([]);\n  var area = ref(null);\n  var arrowMode = ref(false);\n  arrows.forEach(function (el) {\n    list.push(el);\n  });\n  var addNewArrow = function addNewArrow(items) {\n    console.log(items);\n    // list.push({\n    //     id: Math.random() * 1000,\n    //     firstItem: items.firstItem,\n    //     secondItem: items.secondItem,\n    //     points: [],\n    // });\n\n    // console.log(list);\n  };\n\n  var setArrow = function setArrow(firstItem) {\n    var firstItemOffset = getItemInDocById(firstItem);\n    if (!firstItemOffset) return;\n    arrowMode.value = true;\n    document.addEventListener(\"mousemove\", mouseMovelisterenerSetArrow(firstItemOffset));\n  };\n\n  // const getOffsetOfItems = (firstItem, secondItem) => {\n  //     const firstItemOffset = firstItem.getBoundingClienRect();\n  //     const secondItemOffset = secondItem.getBoundingClienRect();\n\n  //     if(firstItemOffset.bottom - secondItemOffset.top > 100) { // First item on top\n\n  //     }else if(firstItem.top - secondItem.bottom  ) { // Second item on top\n\n  //     }\n  // };\n\n  var removeArrow = function removeArrow(id) {\n    console.log(id);\n  };\n  var clearArea = function clearArea() {\n    area.value.innerHTML = \"\";\n  };\n  var drawArrow = function drawArrow(x1, y1, x2, y2) {\n    console.log(x1, y1, x2, y2);\n  };\n  var init = function init(areaID) {\n    area.value = document.getElementById(areaID);\n    clearArea();\n    console.log(area.value);\n  };\n  var mouseMovelisterenerSetArrow = function mouseMovelisterenerSetArrow(firstItemOffset) {\n    return function (event) {\n      if (!arrowMode.value) return;\n      var pageX = event.pageX;\n      var pageY = event.pageY;\n      var itemOffset = firstItemOffset.getBoundingClientRect();\n      var xPos = 0;\n      var yPos = 0;\n      if (itemOffset.top - pageY > 100) {\n        yPos = 0;\n      } else if (pageY - itemOffset.bottom > 100) {\n        yPos += itemOffset.height / 2;\n      } else {\n        if (pageX > itemOffset.right) {\n          xPos += itemOffset.width / 2;\n        } else if (pageX < itemOffset) {\n          xPos = 0;\n        }\n      }\n      drawArrow(itemOffset.left + xPos, itemOffset.top + yPos, pageX, pageY);\n    };\n  };\n  return {\n    list: list,\n    arrowMode: arrowMode,\n    addNewArrow: addNewArrow,\n    removeArrow: removeArrow,\n    setArrow: setArrow,\n    init: init\n  };\n}","map":{"version":3,"names":["reactive","ref","getItemInDocById","useArrows","arrows","arguments","length","undefined","list","area","arrowMode","forEach","el","push","addNewArrow","items","console","log","setArrow","firstItem","firstItemOffset","value","document","addEventListener","mouseMovelisterenerSetArrow","removeArrow","id","clearArea","innerHTML","drawArrow","x1","y1","x2","y2","init","areaID","getElementById","event","pageX","pageY","itemOffset","getBoundingClientRect","xPos","yPos","top","bottom","height","right","width","left"],"sources":["C:/Users/Setis/Documents/alex/vue-todo-app/src/hooks/items/arrows.js"],"sourcesContent":["import { reactive, ref } from \"vue\";\r\nimport { getItemInDocById } from \"../getItem\";\r\n\r\nexport function useArrows(arrows = []) {\r\n    const list = reactive([]);\r\n    const area = ref(null);\r\n    const arrowMode = ref(false);\r\n\r\n    arrows.forEach((el) => {\r\n        list.push(el);\r\n    });\r\n\r\n    const addNewArrow = (items) => {\r\n        console.log(items);\r\n        // list.push({\r\n        //     id: Math.random() * 1000,\r\n        //     firstItem: items.firstItem,\r\n        //     secondItem: items.secondItem,\r\n        //     points: [],\r\n        // });\r\n\r\n        // console.log(list);\r\n    };\r\n\r\n    const setArrow = (firstItem) => {\r\n        const firstItemOffset = getItemInDocById(firstItem);\r\n        if (!firstItemOffset) return;\r\n\r\n        arrowMode.value = true;\r\n\r\n        document.addEventListener(\r\n            \"mousemove\",\r\n            mouseMovelisterenerSetArrow(firstItemOffset)\r\n        );\r\n    };\r\n\r\n    // const getOffsetOfItems = (firstItem, secondItem) => {\r\n    //     const firstItemOffset = firstItem.getBoundingClienRect();\r\n    //     const secondItemOffset = secondItem.getBoundingClienRect();\r\n\r\n    //     if(firstItemOffset.bottom - secondItemOffset.top > 100) { // First item on top\r\n\r\n    //     }else if(firstItem.top - secondItem.bottom  ) { // Second item on top\r\n\r\n    //     }\r\n    // };\r\n\r\n    const removeArrow = (id) => {\r\n        console.log(id);\r\n    };\r\n\r\n    const clearArea = () => {\r\n        area.value.innerHTML = \"\";\r\n    };\r\n\r\n    const drawArrow = (x1, y1, x2, y2) => {\r\n        console.log(x1, y1, x2, y2);\r\n    };\r\n\r\n    const init = (areaID) => {\r\n        area.value = document.getElementById(areaID);\r\n        clearArea();\r\n\r\n        console.log(area.value);\r\n    };\r\n\r\n    const mouseMovelisterenerSetArrow = (firstItemOffset) => (event) => {\r\n        if (!arrowMode.value) return;\r\n        const pageX = event.pageX;\r\n        const pageY = event.pageY;\r\n        const itemOffset = firstItemOffset.getBoundingClientRect();\r\n\r\n        let xPos = 0;\r\n        let yPos = 0;\r\n\r\n        if (itemOffset.top - pageY > 100) {\r\n            yPos = 0;\r\n        } else if (pageY - itemOffset.bottom > 100) {\r\n            yPos += itemOffset.height / 2;\r\n        } else {\r\n            if (pageX > itemOffset.right) {\r\n                xPos += itemOffset.width / 2;\r\n            } else if (pageX < itemOffset) {\r\n                xPos = 0;\r\n            }\r\n        }\r\n\r\n        drawArrow(itemOffset.left + xPos, itemOffset.top + yPos, pageX, pageY);\r\n    };\r\n\r\n    return {\r\n        list,\r\n        arrowMode,\r\n\r\n        addNewArrow,\r\n        removeArrow,\r\n        setArrow,\r\n\r\n        init,\r\n    };\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}